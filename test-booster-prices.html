<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç —Ü–µ–Ω –±—É—Å—Ç–µ—Ä–æ–≤ - 2048</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 2rem;
        }

        .test-section {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 20px;
            backdrop-filter: blur(10px);
        }

        .test-section h2 {
            margin-bottom: 15px;
            font-size: 1.3rem;
            color: #FFD700;
        }

        .booster-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .booster-card {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 12px;
            padding: 15px;
            text-align: center;
        }

        .booster-icon {
            font-size: 3rem;
            margin-bottom: 10px;
        }

        .booster-name {
            font-weight: 600;
            margin-bottom: 10px;
        }

        .price-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 8px 0;
            padding: 8px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
        }

        input[type="number"] {
            width: 80px;
            padding: 6px;
            border-radius: 6px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            background: rgba(255, 255, 255, 0.2);
            color: white;
            text-align: center;
            font-weight: 600;
        }

        button {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            border: none;
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: transform 0.2s;
            margin: 5px;
        }

        button:hover {
            transform: translateY(-2px);
        }

        button.danger {
            background: linear-gradient(135deg, #f44336, #d32f2f);
        }

        button.info {
            background: linear-gradient(135deg, #2196F3, #1976D2);
        }

        .status {
            padding: 12px;
            border-radius: 8px;
            margin: 10px 0;
            font-weight: 600;
        }

        .status.success {
            background: rgba(76, 175, 80, 0.3);
            border: 1px solid #4CAF50;
        }

        .status.error {
            background: rgba(244, 67, 54, 0.3);
            border: 1px solid #f44336;
        }

        .status.info {
            background: rgba(33, 150, 243, 0.3);
            border: 1px solid #2196F3;
        }

        pre {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 8px;
            overflow-x: auto;
            margin-top: 10px;
            font-size: 0.9rem;
        }

        .button-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üß™ –¢–µ—Å—Ç —Å–∏—Å—Ç–µ–º—ã —Ü–µ–Ω –±—É—Å—Ç–µ—Ä–æ–≤</h1>

        <!-- –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ -->
        <div class="test-section">
            <h2>üìä –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ localStorage</h2>
            <button onclick="loadCurrentState()">üîÑ –û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ</button>
            <button class="info" onclick="exportData()">üíæ –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö</button>
            <button class="danger" onclick="clearData()">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –¥–∞–Ω–Ω—ã–µ</button>
            <pre id="current-state">–ó–∞–≥—Ä—É–∑–∫–∞...</pre>
        </div>

        <!-- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ü–µ–Ω -->
        <div class="test-section">
            <h2>üí∞ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ü–µ–Ω –±—É—Å—Ç–µ—Ä–æ–≤</h2>
            <div class="booster-grid" id="booster-inputs"></div>
            <div class="button-group">
                <button onclick="saveAllPrices()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤—Å–µ —Ü–µ–Ω—ã</button>
                <button class="info" onclick="setDefaultPrices()">üîÑ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ —Ü–µ–Ω—ã</button>
            </div>
            <div id="save-status"></div>
        </div>

        <!-- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ -->
        <div class="test-section">
            <h2>‚úÖ –¢–µ—Å—Ç –∑–∞–≥—Ä—É–∑–∫–∏ —Ü–µ–Ω –≤ Shop</h2>
            <button onclick="testShopLoad()">üß™ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å shop.js</button>
            <pre id="shop-test-result">–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –¥–ª—è —Ç–µ—Å—Ç–∞</pre>
        </div>

        <!-- –ë—ã—Å—Ç—Ä—ã–µ —Ç–µ—Å—Ç—ã -->
        <div class="test-section">
            <h2>‚ö° –ë—ã—Å—Ç—Ä—ã–µ —Ç–µ—Å—Ç—ã</h2>
            <div class="button-group">
                <button onclick="test1()">–¢–µ—Å—Ç 1: –î–µ—Ñ–æ–ª—Ç–Ω—ã–µ —Ü–µ–Ω—ã</button>
                <button onclick="test2()">–¢–µ—Å—Ç 2: –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Ü–µ–Ω—ã</button>
                <button onclick="test3()">–¢–µ—Å—Ç 3: –ó–∞–≥—Ä—É–∑–∫–∞ –≤ Shop</button>
            </div>
            <div id="quick-test-result"></div>
        </div>
    </div>

    <script>
        // –î–µ—Ñ–æ–ª—Ç–Ω—ã–µ —Ü–µ–Ω—ã
        const DEFAULT_PRICES = {
            undo: { coins: 50, stars: 3 },
            shuffle: { coins: 75, stars: 4 },
            bomb: { coins: 100, stars: 5 }
        };

        const BOOSTER_INFO = {
            undo: { name: '–û—Ç–º–µ–Ω–∞ —Ö–æ–¥–∞', icon: '‚ü≤' },
            shuffle: { name: '–ü–µ—Ä–µ–º–µ—à–∞—Ç—å', icon: '‚ö°' },
            bomb: { name: '–ë–æ–º–±–∞', icon: 'üí£' }
        };

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        function init() {
            renderBoosterInputs();
            loadCurrentState();
        }

        // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –ø–æ–ª–µ–π –≤–≤–æ–¥–∞
        function renderBoosterInputs() {
            const container = document.getElementById('booster-inputs');
            const prices = JSON.parse(localStorage.getItem('boosterPrices')) || DEFAULT_PRICES;

            container.innerHTML = Object.entries(BOOSTER_INFO).map(([id, info]) => {
                const price = prices[id] || DEFAULT_PRICES[id];
                return `
                    <div class="booster-card">
                        <div class="booster-icon">${info.icon}</div>
                        <div class="booster-name">${info.name}</div>
                        <div class="price-row">
                            <span>üí∞ –ú–æ–Ω–µ—Ç—ã:</span>
                            <input type="number" id="${id}-coins" value="${price.coins || 0}" min="1" max="1000">
                        </div>
                        <div class="price-row">
                            <span>‚≠ê Stars:</span>
                            <input type="number" id="${id}-stars" value="${price.stars || 0}" min="1" max="100">
                        </div>
                    </div>
                `;
            }).join('');
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
        function loadCurrentState() {
            const boosterPrices = localStorage.getItem('boosterPrices');
            const state = {
                boosterPrices: boosterPrices ? JSON.parse(boosterPrices) : null,
                rawValue: boosterPrices
            };

            document.getElementById('current-state').textContent = JSON.stringify(state, null, 2);
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö —Ü–µ–Ω
        function saveAllPrices() {
            const prices = {};
            
            Object.keys(BOOSTER_INFO).forEach(id => {
                const coins = parseInt(document.getElementById(`${id}-coins`).value);
                const stars = parseInt(document.getElementById(`${id}-stars`).value);
                
                if (coins >= 1 && coins <= 1000 && stars >= 1 && stars <= 100) {
                    prices[id] = { coins, stars };
                } else {
                    showStatus('save-status', `‚ùå –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–ª—è ${BOOSTER_INFO[id].name}`, 'error');
                    return;
                }
            });

            localStorage.setItem('boosterPrices', JSON.stringify(prices));
            showStatus('save-status', '‚úÖ –í—Å–µ —Ü–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!', 'success');
            loadCurrentState();
        }

        // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–µ—Ñ–æ–ª—Ç–Ω—ã—Ö —Ü–µ–Ω
        function setDefaultPrices() {
            localStorage.setItem('boosterPrices', JSON.stringify(DEFAULT_PRICES));
            renderBoosterInputs();
            loadCurrentState();
            showStatus('save-status', '‚úÖ –î–µ—Ñ–æ–ª—Ç–Ω—ã–µ —Ü–µ–Ω—ã —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã', 'success');
        }

        // –û—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
        function clearData() {
            if (confirm('–û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –æ —Ü–µ–Ω–∞—Ö –±—É—Å—Ç–µ—Ä–æ–≤?')) {
                localStorage.removeItem('boosterPrices');
                renderBoosterInputs();
                loadCurrentState();
                showStatus('save-status', '‚ÑπÔ∏è –î–∞–Ω–Ω—ã–µ –æ—á–∏—â–µ–Ω—ã', 'info');
            }
        }

        // –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
        function exportData() {
            const data = {
                boosterPrices: JSON.parse(localStorage.getItem('boosterPrices') || '{}'),
                timestamp: new Date().toISOString()
            };

            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `booster-prices-${Date.now()}.json`;
            a.click();
            URL.revokeObjectURL(url);
        }

        // –¢–µ—Å—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –≤ Shop
        function testShopLoad() {
            const boosterPrices = JSON.parse(localStorage.getItem('boosterPrices')) || {};
            
            // –°–∏–º—É–ª—è—Ü–∏—è –ª–æ–≥–∏–∫–∏ –∏–∑ shop.js
            const bonusItems = {
                undo: { name: '–û—Ç–º–µ–Ω–∞ —Ö–æ–¥–∞', price: 50, priceStars: 3 },
                shuffle: { name: '–ü–µ—Ä–µ–º–µ—à–∞—Ç—å', price: 75, priceStars: 4 },
                bomb: { name: '–ë–æ–º–±–∞', price: 100, priceStars: 5 }
            };

            Object.entries(bonusItems).forEach(([bonusId, bonus]) => {
                if (boosterPrices[bonusId]) {
                    if (typeof boosterPrices[bonusId] === 'object') {
                        bonus.price = boosterPrices[bonusId].coins || bonus.price;
                        bonus.priceStars = boosterPrices[bonusId].stars || bonus.priceStars;
                    } else {
                        bonus.price = boosterPrices[bonusId];
                    }
                }
            });

            const result = {
                success: true,
                message: '–¶–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –ø–æ –ª–æ–≥–∏–∫–µ shop.js',
                loadedPrices: bonusItems
            };

            document.getElementById('shop-test-result').textContent = JSON.stringify(result, null, 2);
        }

        // –ë—ã—Å—Ç—Ä—ã–µ —Ç–µ—Å—Ç—ã
        function test1() {
            setDefaultPrices();
            testShopLoad();
            showQuickTestResult('‚úÖ –¢–µ—Å—Ç 1 –ø—Ä–æ–π–¥–µ–Ω: –î–µ—Ñ–æ–ª—Ç–Ω—ã–µ —Ü–µ–Ω—ã —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã');
        }

        function test2() {
            const customPrices = {
                undo: { coins: 100, stars: 5 },
                shuffle: { coins: 150, stars: 8 },
                bomb: { coins: 200, stars: 10 }
            };
            localStorage.setItem('boosterPrices', JSON.stringify(customPrices));
            renderBoosterInputs();
            loadCurrentState();
            testShopLoad();
            showQuickTestResult('‚úÖ –¢–µ—Å—Ç 2 –ø—Ä–æ–π–¥–µ–Ω: –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Ü–µ–Ω—ã —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã');
        }

        function test3() {
            testShopLoad();
            showQuickTestResult('‚úÖ –¢–µ—Å—Ç 3 –ø—Ä–æ–π–¥–µ–Ω: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ —Å–µ–∫—Ü–∏–∏ "–¢–µ—Å—Ç –∑–∞–≥—Ä—É–∑–∫–∏ —Ü–µ–Ω"');
        }

        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        function showStatus(elementId, message, type) {
            const el = document.getElementById(elementId);
            el.innerHTML = `<div class="status ${type}">${message}</div>`;
            setTimeout(() => el.innerHTML = '', 5000);
        }

        function showQuickTestResult(message) {
            const el = document.getElementById('quick-test-result');
            el.innerHTML = `<div class="status success">${message}</div>`;
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
