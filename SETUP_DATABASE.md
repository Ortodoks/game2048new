# üöÄ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∏–≥—Ä—ã 2048

## üìã –û–±–∑–æ—Ä

–í–∞—à–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ç–µ–ø–µ—Ä—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö MongoDB. –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –¥–≤—É—Ö —Ä–µ–∂–∏–º–∞—Ö:

- **–° –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö (MongoDB)** - –≤—Å–µ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- **–ë–µ–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (localStorage)** - –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ

## ‚úÖ –ß—Ç–æ —É–∂–µ –≥–æ—Ç–æ–≤–æ

### 1. **–°–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å** (`server/server.js`)
- ‚úÖ –ü–æ–ª–Ω—ã–π REST API —Å MongoDB
- ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—á–µ—Ç–æ–≤ –∏ —Ä–µ–π—Ç–∏–Ω–≥–∞
- ‚úÖ –ò–≥—Ä–æ–≤—ã–µ —Å–µ—Å—Å–∏–∏
- ‚úÖ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ Telegram Bot –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π fallback –Ω–∞ localStorage

### 2. **–ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è —á–∞—Å—Ç—å**
- ‚úÖ `js/telegram-integration.js` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ `js/database.js` - —Ä–∞–±–æ—Ç–∞ —Å IndexedDB –∏ localStorage
- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º

### 3. **API Endpoints**
```
POST   /api/user/register          - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
GET    /api/user/:telegram_id      - –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
PUT    /api/user/:telegram_id      - –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
GET    /api/user/photo/:telegram_id - –ü–æ–ª—É—á–∏—Ç—å —Ñ–æ—Ç–æ –∏–∑ Telegram

POST   /api/score                  - –ó–∞–≥—Ä—É–∑–∏—Ç—å —Å—á–µ—Ç
GET    /api/leaderboard            - –ì–ª–æ–±–∞–ª—å–Ω—ã–π —Ä–µ–π—Ç–∏–Ω–≥
GET    /api/rank/:telegram_id      - –ü–æ–∑–∏—Ü–∏—è –≤ —Ä–µ–π—Ç–∏–Ω–≥–µ
GET    /api/stats                  - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

POST   /api/game-session           - –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–≥—Ä–æ–≤—É—é —Å–µ—Å—Å–∏—é
GET    /api/game-sessions/:telegram_id - –ò—Å—Ç–æ—Ä–∏—è –∏–≥—Ä

POST   /api/achievements           - –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ
GET    /api/achievements/:telegram_id - –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π

POST   /api/user-settings          - –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
GET    /api/user-settings/:telegram_id - –ü–æ–ª—É—á–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

GET    /api/check-admin/:telegram_id - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∞
GET    /api/admin/users            - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω)

GET    /api/health                 - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–∞
```

---

## üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### –í–∞—Ä–∏–∞–Ω—Ç 1: –° MongoDB (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞)

#### –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ MongoDB

**Windows:**
1. –°–∫–∞—á–∞–π—Ç–µ MongoDB Community Server: https://www.mongodb.com/try/download/community
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
3. MongoDB –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–∞–∫ —Å–ª—É–∂–±–∞

**–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ MongoDB Atlas (–æ–±–ª–∞—á–Ω–∞—è –ë–î, –±–µ—Å–ø–ª–∞—Ç–Ω–æ):**
1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ https://www.mongodb.com/cloud/atlas
2. –°–æ–∑–¥–∞–π—Ç–µ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –∫–ª–∞—Å—Ç–µ—Ä (M0)
3. –°–æ–∑–¥–∞–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ë–î
4. –ü–æ–ª—É—á–∏—Ç–µ connection string (–Ω–∞–ø—Ä–∏–º–µ—Ä: `mongodb+srv://user:password@cluster.mongodb.net/2048-game`)

#### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `server/.env`:

```env
# Telegram Bot Token (–ø–æ–ª—É—á–∏—Ç–µ —É @BotFather)
BOT_TOKEN=1832915778:AAEoEWEQLFkG43zhgZ6PfLQyrwci_20_7KE

# URL –≤–∞—à–µ–≥–æ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
WEBAPP_URL=http://localhost:3000

# MongoDB Connection String
# –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π MongoDB:
MONGODB_URI=mongodb://localhost:27017/2048-game

# –ò–ª–∏ –¥–ª—è MongoDB Atlas:
# MONGODB_URI=mongodb+srv://username:password@cluster.mongodb.net/2048-game

# –ü–æ—Ä—Ç —Å–µ—Ä–≤–µ—Ä–∞
PORT=3000

# –†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã
NODE_ENV=development
```

#### –®–∞–≥ 3: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
cd server
npm install
```

#### –®–∞–≥ 4: –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä

**–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (—Å –∞–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–æ–π):**
```bash
npm run dev:full
```

**–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:**
```bash
npm run start:full
```

–í—ã —É–≤–∏–¥–∏—Ç–µ:
```
üöÄ Server running on port 3000
ü§ñ Telegram bot is active
üìä API available at http://localhost:3000/api
üíæ Database: MongoDB connected
üéÆ Game ready to play!
```

---

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ë–µ–∑ MongoDB (—Ç–æ–ª—å–∫–æ localStorage)

–ï—Å–ª–∏ –≤—ã –Ω–µ —Ö–æ—Ç–∏—Ç–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å MongoDB, —Å–µ—Ä–≤–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –≤ —Ä–µ–∂–∏–º–µ localStorage.

#### –®–∞–≥ 1: –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `server/.env`

```env
BOT_TOKEN=1832915778:AAEoEWEQLFkG43zhgZ6PfLQyrwci_20_7KE
WEBAPP_URL=http://localhost:3000
PORT=3000
```

#### –®–∞–≥ 2: –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ—Å—Ç–æ–π —Å–µ—Ä–≤–µ—Ä

```bash
cd server
npm install
npm run dev
```

–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–ª–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –±–µ–∑ MongoDB:
```bash
npm run dev:full
```

–í—ã —É–≤–∏–¥–∏—Ç–µ:
```
üöÄ Server running on port 3000
‚ö†Ô∏è Server will run without database
üíæ Database: localStorage mode
```

---

## üéÆ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ Telegram
2. `telegram-integration.js` –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ Telegram
3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å –Ω–∞ `/api/user/register`
4. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ MongoDB (–∏–ª–∏ localStorage)
5. –ü—Ä–∏ —Å–ª–µ–¥—É—é—â–∏—Ö –∑–∞–ø—É—Å–∫–∞—Ö –¥–∞–Ω–Ω—ã–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è

### –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–≥—Ä–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

1. –ò–≥—Ä–æ–∫ –∑–∞–≤–µ—Ä—à–∞–µ—Ç –∏–≥—Ä—É
2. –°—á–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ `/api/score`
3. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –∫–æ–ª–ª–µ–∫—Ü–∏—é `scores` (—Ç–æ–ª—å–∫–æ –ª—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç)
4. –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≥–ª–æ–±–∞–ª—å–Ω—ã–π —Ä–µ–π—Ç–∏–Ω–≥
5. –î–∞–Ω–Ω—ã–µ –¥–æ—Å—Ç—É–ø–Ω—ã –Ω–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö

### –ì–ª–æ–±–∞–ª—å–Ω—ã–π —Ä–µ–π—Ç–∏–Ω–≥

- –î–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ `/api/leaderboard`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –ø–æ —É–±—ã–≤–∞–Ω–∏—é —Å—á–µ—Ç–∞
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ø-100 –∏–≥—Ä–æ–∫–æ–≤
- –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

---

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö MongoDB

### –ö–æ–ª–ª–µ–∫—Ü–∏–∏:

**users** - –ø—Ä–æ—Ñ–∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
```javascript
{
  telegram_id: Number,        // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –∏–∑ Telegram
  username: String,           // @username
  first_name: String,         // –ò–º—è
  last_name: String,          // –§–∞–º–∏–ª–∏—è
  photo_url: String,          // URL —Ñ–æ—Ç–æ –ø—Ä–æ—Ñ–∏–ª—è
  display_name: String,       // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∏–º—è
  avatar: String,             // –ê–≤–∞—Ç–∞—Ä (–ø–µ—Ä–≤–∞—è –±—É–∫–≤–∞ –∏–º–µ–Ω–∏)
  created_at: Date,           // –î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
  last_active: Date           // –ü–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
}
```

**scores** - –ª—É—á—à–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
```javascript
{
  telegram_id: Number,        // ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  username: String,           // –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  avatar: String,             // –ê–≤–∞—Ç–∞—Ä
  score: Number,              // –õ—É—á—à–∏–π —Å—á–µ—Ç
  timestamp: Number,          // –í—Ä–µ–º—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
  created_at: Date,           // –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–ø–∏—Å–∏
  updated_at: Date            // –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
}
```

**game_sessions** - –∏—Å—Ç–æ—Ä–∏—è –∏–≥—Ä
```javascript
{
  telegram_id: Number,        // ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  score: Number,              // –°—á–µ—Ç –≤ –∏–≥—Ä–µ
  moves: Number,              // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ö–æ–¥–æ–≤
  duration: Number,           // –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–º—Å)
  won: Boolean,               // –ü–æ–±–µ–¥–∞ (–¥–æ—Å—Ç–∏–≥–Ω—É—Ç–∞ 2048)
  highestTile: Number,        // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø–ª–∏—Ç–∫–∞
  created_at: Date            // –î–∞—Ç–∞ –∏–≥—Ä—ã
}
```

**achievements** - –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
```javascript
{
  telegram_id: Number,        // ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  achievement_id: String,     // ID –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
  unlocked_at: Date           // –î–∞—Ç–∞ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
}
```

**user_settings** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
```javascript
{
  telegram_id: Number,        // ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  soundEnabled: Boolean,      // –ó–≤—É–∫ –≤–∫–ª—é—á–µ–Ω
  volume: Number,             // –ì—Ä–æ–º–∫–æ—Å—Ç—å (0-100)
  vibrationEnabled: Boolean,  // –í–∏–±—Ä–∞—Ü–∏—è –≤–∫–ª—é—á–µ–Ω–∞
  theme: String,              // –¢–µ–º–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è
  activeSkin: String,         // –ê–∫—Ç–∏–≤–Ω—ã–π —Å–∫–∏–Ω
  purchasedSkins: Array,      // –ö—É–ø–ª–µ–Ω–Ω—ã–µ —Å–∫–∏–Ω—ã
  coins: Number,              // –ú–æ–Ω–µ—Ç—ã
  updated_at: Date            // –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
}
```

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ Graceful shutdown
- ‚úÖ CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç SQL-–∏–Ω—ä–µ–∫—Ü–∏–π (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è MongoDB)

---

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### MongoDB –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è

**–ü—Ä–æ–±–ª–µ–º–∞:** `‚ùå MongoDB connection failed`

**–†–µ—à–µ–Ω–∏—è:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –∑–∞–ø—É—â–µ–Ω –ª–∏ MongoDB:
   ```bash
   # Windows
   services.msc -> –Ω–∞–π–¥–∏—Ç–µ MongoDB
   
   # –ò–ª–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
   mongosh
   ```

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `MONGODB_URI` –≤ `.env`
3. –î–ª—è MongoDB Atlas –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
   - –ü—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å connection string
   - –î–æ–±–∞–≤–ª–µ–Ω –ª–∏ –≤–∞—à IP –≤ whitelist
   - –ü—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –ª–æ–≥–∏–Ω–∞/–ø–∞—Ä–æ–ª—è

### –°–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –¥–∞–Ω–Ω—ã–µ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –æ—à–∏–±–∫–∏
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ URL —Å–µ—Ä–≤–µ—Ä–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤ `telegram-integration.js` (—Å—Ç—Ä–æ–∫–∏ 265, 355)

### Telegram Bot –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `BOT_TOKEN` –≤ `.env`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–æ–∫–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π (–ø–æ–ª—É—á–∏—Ç–µ —É @BotFather)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω

---

## üöÄ –î–µ–ø–ª–æ–π –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω

### Render.com (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. –°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç –Ω–∞ https://render.com
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π Web Service
3. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
4. –ù–∞—Å—Ç—Ä–æ–π–∫–∏:
   - Build Command: `cd server && npm install`
   - Start Command: `cd server && npm run start:full`
5. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
   - `BOT_TOKEN`
   - `MONGODB_URI` (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ MongoDB Atlas)
   - `WEBAPP_URL` (URL –≤–∞—à–µ–≥–æ Render –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
   - `PORT=3000`

### Railway.app

1. –°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç –Ω–∞ https://railway.app
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç
3. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ GitHub
4. –î–æ–±–∞–≤—å—Ç–µ MongoDB –∏–∑ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞
5. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
6. Deploy –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

---

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–∞

```bash
curl http://localhost:3000/api/health
```

–û—Ç–≤–µ—Ç:
```json
{
  "status": "ok",
  "timestamp": 1234567890,
  "database": "connected",
  "mode": "database"
}
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

–°–µ—Ä–≤–µ—Ä –≤—ã–≤–æ–¥–∏—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏:
- ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ —Å—á–µ—Ç–æ–≤
- ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
- ‚úÖ –û—à–∏–±–∫–∏

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –ù–∞—Å—Ç—Ä–æ–π—Ç–µ MongoDB (–ª–æ–∫–∞–ª—å–Ω–æ –∏–ª–∏ Atlas)
2. ‚úÖ –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
3. ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: `npm install`
4. ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä: `npm run dev:full`
5. ‚úÖ –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: `http://localhost:3000`
6. ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
7. ‚úÖ –ó–∞–¥–µ–ø–ª–æ–π—Ç–µ –Ω–∞ Render/Railway –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

---

## üí° –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
cd server
npm install

# –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (—Å MongoDB)
npm run dev:full

# –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (–±–µ–∑ MongoDB)
npm run dev

# –ó–∞–ø—É—Å–∫ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
npm run start:full

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
curl http://localhost:3000/api/health

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ MongoDB (–µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ª–æ–∫–∞–ª—å–Ω–æ)
mongosh
use 2048-game
db.users.find()
db.scores.find().sort({score: -1})
```

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª `.env`

**–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ!** üéâ

–¢–µ–ø–µ—Ä—å –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö –∏ –≥–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –∫–∞–∫ –ª–æ–∫–∞–ª—å–Ω–æ, —Ç–∞–∫ –∏ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ.
