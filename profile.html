<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <!-- Prevent caching for Telegram Mini App -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    
    <title>–ü—Ä–æ—Ñ–∏–ª—å - 2048</title>
    <script src="version.js"></script>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            margin: 0;
            padding: 0;
            padding-bottom: 0px;
            overflow: hidden;
            position: fixed;
            width: 100%;
            height: 100vh;
        }

        .profile-container {
            max-width: 600px;
            margin: 0 auto;
            padding: 85px 20px 100px 20px;
            min-height: 100vh;
            height: 100vh;
            overflow-y: auto;
            overflow-x: hidden;
            -webkit-overflow-scrolling: touch;
            position: relative;
        }/* Admin Panel Styles */
        .admin-panel {
            padding: 0;
        }
        
        .admin-header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), rgba(255, 165, 0, 0.1));
            border-radius: 16px;
            border: 1px solid rgba(255, 215, 0, 0.2);
        }
        
        .admin-header h2 {
            font-size: 2rem;
            margin: 0 0 10px 0;
            background: linear-gradient(135deg, #FFD700, #FFA500);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .admin-subtitle {
            color: rgba(255, 255, 255, 0.7);
            margin: 0;
        }

        .admin-tabs {
            display: flex;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 4px;
            margin-bottom: 24px;
            overflow-x: auto;
        }

        .admin-tab-btn {
            flex: 1;
            padding: 12px 16px;
            background: transparent;
            border: none;
            color: rgba(255, 255, 255, 0.7);
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            font-weight: 600;
            white-space: nowrap;
            min-width: 120px;
        }

        .admin-tab-btn.active {
            background: linear-gradient(135deg, #FFD700, #FFA500);
            color: #000;
            transform: translateY(-1px);
        }

        .admin-tab-btn:hover:not(.active) {
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
        }

        .admin-tab-content {
            display: none;
        }

        .admin-tab-content.active {
            display: block;
        }

        /* My Skins Section */
        .profile-section {
            margin-top: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 16px;
            border: 1px solid rgba(255, 255, 255, 0.08);
        }

        .section-title {
            font-size: 1.3rem;
            margin: 0 0 20px 0;
            color: #fff;
            font-weight: 700;
        }

        /* Admin Skins Management */
        .skins-admin-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .skin-admin-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 20px;
            transition: all 0.3s ease;
        }

        .skin-admin-card:hover {
            background: rgba(255, 255, 255, 0.08);
            border-color: rgba(255, 255, 255, 0.2);
        }

        .skin-admin-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .skin-admin-preview {
            font-size: 3rem;
        }

        .skin-admin-info h4 {
            margin: 0 0 5px;
            font-size: 1.2rem;
            color: #78dbff;
        }

        .skin-admin-id {
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.5);
        }

        .skin-admin-prices {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin: 15px 0;
        }

        .price-input-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .price-input-group label {
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.7);
        }

        .price-input-group input {
            padding: 8px 12px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: white;
            font-size: 1rem;
            font-weight: 600;
        }

        .price-input-group input:focus {
            outline: none;
            border-color: #78dbff;
            box-shadow: 0 0 10px rgba(120, 219, 255, 0.3);
        }

        .skin-admin-actions {
            display: flex;
            gap: 8px;
            margin-top: 15px;
        }

        .btn-save-skin {
            flex: 1;
            padding: 10px;
            background: linear-gradient(135deg, #4ecdc4, #44a08d);
            border: none;
            border-radius: 8px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-save-skin:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(78, 205, 196, 0.4);
        }

        .btn-edit-json {
            flex: 1;
            padding: 10px;
            background: rgba(120, 219, 255, 0.2);
            border: 1px solid rgba(120, 219, 255, 0.5);
            border-radius: 8px;
            color: #78dbff;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-edit-json:hover {
            background: rgba(120, 219, 255, 0.3);
            transform: translateY(-2px);
        }

        /* Toggle Switch for Admin */
        .toggle-switch {
            position: relative;
            width: 50px;
            height: 26px;
            flex-shrink: 0;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider-admin {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(255, 255, 255, 0.2);
            transition: 0.4s;
            border-radius: 26px;
        }

        .toggle-slider-admin:before {
            position: absolute;
            content: "";
            height: 20px;
            width: 20px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: 0.4s;
            border-radius: 50%;
        }

        input:checked + .toggle-slider-admin {
            background-color: #4ecdc4;
        }

        input:checked + .toggle-slider-admin:before {
            transform: translateX(24px);
        }

        input:disabled + .toggle-slider-admin {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .popular-skins-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .popular-skin-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .popular-skin-left {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .popular-skin-rank {
            font-size: 1.5rem;
            font-weight: 700;
            color: #FFD700;
            min-width: 40px;
        }

        .popular-skin-rank.rank-2 {
            color: #C0C0C0;
        }

        .popular-skin-rank.rank-3 {
            color: #CD7F32;
        }

        .popular-skin-icon {
            font-size: 2rem;
        }

        .popular-skin-name {
            font-size: 1.1rem;
            font-weight: 600;
            color: white;
        }

        .popular-skin-purchases {
            font-size: 1.2rem;
            font-weight: 700;
            color: #78dbff;
        }

        .skin-stats-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .stats-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 24px;
        }

        .admin-stat-card {
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 16px;
            padding: 20px;
            text-align: center;
            transition: transform 0.3s ease;
        }

        .admin-stat-card:hover {
            transform: translateY(-2px);
        }

        .admin-stat-card .stat-icon {
            font-size: 2rem;
            margin-bottom: 8px;
        }

        .admin-stat-card .stat-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: #FFD700;
            margin-bottom: 4px;
        }

        .admin-stat-card .stat-label {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
        }

        .admin-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .admin-section h3 {
            margin: 0 0 16px 0;
            color: #FFD700;
            font-size: 1.2rem;
        }

        .search-bar {
            display: flex;
            gap: 12px;
            margin-bottom: 20px;
        }

        .search-bar input {
            flex: 1;
            padding: 12px 16px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: white;
            font-size: 0.9rem;
        }

        .search-bar input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        .btn-refresh {
            padding: 12px 16px;
            background: linear-gradient(135deg, #4CAF50, #45a049);
            border: none;
            border-radius: 8px;
            color: white;
            cursor: pointer;
            font-weight: 600;
            transition: transform 0.2s ease;
        }

        .btn-refresh:hover {
            transform: translateY(-1px);
        }

        .settings-form {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .form-group label {
            font-weight: 600;
            color: #FFD700;
            font-size: 0.9rem;
        }

        .form-group input {
            padding: 12px 16px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: white;
            font-size: 0.9rem;
        }

        .form-group small {
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.8rem;
        }

        .btn-primary {
            padding: 12px 24px;
            background: linear-gradient(135deg, #FFD700, #FFA500);
            border: none;
            border-radius: 8px;
            color: #000;
            font-weight: 700;
            cursor: pointer;
            transition: transform 0.2s ease;
            align-self: flex-start;
        }

        .btn-primary:hover {
            transform: translateY(-1px);
        }

        /* Booster Admin Styles */
        .booster-prices-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 16px;
            margin-top: 16px;
        }

        .booster-price-card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
        }

        .booster-icon-large {
            font-size: 3rem;
            margin-bottom: 12px;
        }

        .booster-price-card h4 {
            margin: 0 0 16px 0;
            color: #78dbff;
        }

        .price-controls {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .price-controls label {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.8);
        }

        .price-controls input {
            padding: 10px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: white;
            font-size: 1.1rem;
            text-align: center;
        }

        .btn-save-price {
            padding: 10px 16px;
            background: linear-gradient(135deg, #4CAF50, #45a049);
            border: none;
            border-radius: 8px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .btn-save-price:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(76, 175, 80, 0.4);
        }

        .grant-booster-form {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        .grant-booster-form input,
        .grant-booster-form select {
            padding: 12px 16px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: white;
            font-size: 0.9rem;
        }

        .grant-booster-form input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        .grant-booster-form input[type="text"] {
            flex: 1;
            min-width: 200px;
        }

        .grant-booster-form select {
            flex: 1;
            min-width: 150px;
        }

        .grant-booster-form input[type="number"] {
            width: 100px;
        }

        .btn-grant-booster {
            padding: 12px 24px;
            background: linear-gradient(135deg, #FFD700, #FFA500);
            border: none;
            border-radius: 8px;
            color: #000;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .btn-grant-booster:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255, 215, 0, 0.4);
        }

        .booster-stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-top: 16px;
        }

        .stat-card-admin {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
        }

        .stat-card-admin .stat-icon {
            font-size: 2.5rem;
            margin-bottom: 8px;
        }

        .stat-card-admin .stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: #FFD700;
            margin-bottom: 4px;
        }

        .stat-card-admin .stat-label {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
        }

        .users-list, .top-players-list {
            max-height: 400px;
            overflow-y: auto;
        }

        .user-item, .player-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            margin-bottom: 8px;
        }

        .user-item {
            justify-content: space-between;
        }

        .user-item .user-info-small {
            flex: 1;
        }

        .user-avatar-small {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #78dbff, #667eea);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        .user-info-small {
            flex: 1;
        }

        .user-name-small {
            font-weight: 600;
            color: white;
            margin-bottom: 2px;
        }

        .user-details-small {
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.6);
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: rgba(255, 255, 255, 0.6);
        }

        .user-actions {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .btn-admin-toggle {
            padding: 6px 12px;
            border: none;
            border-radius: 6px;
            font-size: 0.8rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.8);
        }

        .btn-admin-toggle:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-1px);
        }

        .btn-admin-toggle.admin-active {
            background: linear-gradient(135deg, #FFD700, #FFA500);
            color: #000;
        }

        .btn-admin-toggle.admin-active:hover {
            background: linear-gradient(135deg, #FFA500, #FF8C00);
        }
        
        .admin-only::before {
            content: 'üëë';
            position: absolute;
            top: -5px;
            right: -5px;
            font-size: 0.8rem;
        }
        
        /* Toolbar uses styles from main CSS */
        .toolbar {
            display: flex !important;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .profile-header h1 {
            font-size: 2.5rem;
            margin: 0 0 10px 0;
            background: linear-gradient(135deg, #78dbff 0%, #ff77c6 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .profile-header p {
            opacity: 0.8;
            font-size: 1.1rem;
        }

        .back-button {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 12px 20px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            z-index: 10;
            cursor: pointer;
        }

        .back-button:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-2px);
        }

        .profile-tabs {
            display: flex;
            margin-bottom: 30px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 4px;
            overflow-x: auto;
        }

        .profile-tab-btn {
            flex: 1;
            padding: 12px 16px;
            background: transparent;
            border: none;
            color: rgba(255, 255, 255, 0.7);
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            font-weight: 600;
            white-space: nowrap;
        }

        .profile-tab-btn.active {
            background: rgba(255, 255, 255, 0.15);
            color: #fff;
        }

        .profile-tab-content {
            display: none;
            min-height: 400px;
        }

        .profile-tab-content.active {
            display: block;
        }


        /* Profile Tabs Styles */
        .profile-tabs {
            display: flex;
            background: rgba(255, 255, 255, 0.08);
            border-radius: 12px;
            padding: 4px;
            margin-bottom: 20px;
            overflow-x: auto;
        }

        .profile-tab-btn {
            flex: 1;
            padding: 12px 16px;
            background: transparent;
            border: none;
            color: rgba(255, 255, 255, 0.7);
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            font-weight: 600;
            white-space: nowrap;
            min-width: 100px;
        }

        .profile-tab-btn.active {
            background: rgba(255, 255, 255, 0.15);
            color: #fff;
            transform: translateY(-1px);
        }

        .profile-tab-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
        }

        .profile-tab-content {
            display: none;
        }

        .profile-tab-content.active {
            display: block;
        }

        /* User Card Styles */
        .user-card {
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 20px;
            padding: 24px;
            margin-bottom: 24px;
            display: flex;
            align-items: center;
            gap: 20px;
            position: relative;
            overflow: hidden;
        }

        .user-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(120, 219, 255, 0.05) 0%, rgba(255, 119, 198, 0.05) 100%);
            pointer-events: none;
        }

        .user-avatar {
            position: relative;
            width: 80px;
            height: 80px;
            flex-shrink: 0;
        }

        .avatar-icon {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #78dbff 0%, #667eea 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            color: white;
            position: relative;
            z-index: 2;
            box-shadow: 0 8px 32px rgba(120, 219, 255, 0.3);
        }

        .avatar-ring {
            position: absolute;
            top: -4px;
            left: -4px;
            right: -4px;
            bottom: -4px;
            border: 2px solid rgba(120, 219, 255, 0.3);
            border-radius: 50%;
            animation: pulse-ring 2s ease-in-out infinite;
        }

        @keyframes pulse-ring {
            0%, 100% {
                transform: scale(1);
                opacity: 0.3;
            }
            50% {
                transform: scale(1.05);
                opacity: 0.6;
            }
        }

        .user-info {
            flex: 1;
            position: relative;
            z-index: 1;
        }

        .user-name {
            font-size: 1.8rem;
            font-weight: 700;
            color: #fff;
            margin-bottom: 4px;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        .user-id {
            font-size: 1rem;
            color: rgba(255, 255, 255, 0.7);
            font-family: 'Courier New', monospace;
            margin-bottom: 8px;
        }


        .user-stats-mini {
            display: flex;
            gap: 16px;
            position: relative;
            flex-wrap: wrap;
            justify-content: center;
            z-index: 1;
        }

        .mini-stat {
            text-align: center;
            padding: 12px 16px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            min-width: 70px;
        }

        .mini-stat-value {
            font-size: 1.2rem;
            font-weight: 700;
            color: #78dbff;
            margin-bottom: 2px;
            text-shadow: 0 1px 6px rgba(120, 219, 255, 0.4);
        }

        .mini-stat-label {
            font-size: 0.7rem;
            color: rgba(255, 255, 255, 0.8);
            font-weight: 500;
        }

        /* Stats Grid Styles */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.06);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.12);
            border-radius: 16px;
            padding: 16px;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            gap: 8px;
            transition: all 0.2s ease;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
            position: relative;
            overflow: hidden;
            min-height: 100px;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(120, 219, 255, 0.02) 0%, rgba(255, 119, 198, 0.02) 100%);
            pointer-events: none;
        }

        .stat-card:active {
            transform: scale(0.98);
            background: rgba(255, 255, 255, 0.1);
        }

        .stat-icon {
            font-size: 1.8rem;
            opacity: 0.95;
            filter: drop-shadow(0 2px 8px rgba(0, 0, 0, 0.3));
            margin-bottom: 4px;
        }

        .stat-info {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 2px;
            width: 100%;
        }

        .stat-value {
            font-size: 1.4rem;
            font-weight: 700;
            color: #78dbff;
            margin: 0;
            display: block;
            text-shadow: 0 1px 6px rgba(120, 219, 255, 0.4);
            line-height: 1.1;
        }

        .stat-label {
            font-size: 0.75rem;
            opacity: 0.85;
            color: #fff;
            font-weight: 500;
            margin: 0;
            line-height: 1.2;
            text-align: center;
        }

        /* Mobile adaptations */
        @media (max-width: 768px) {
            .stats-grid {
                gap: 10px;
            }

            .stat-card {
                padding: 14px;
                gap: 6px;
                min-height: 90px;
            }

            .stat-icon {
                font-size: 1.6rem;
            }

            .stat-value {
                font-size: 1.2rem;
            }

            .stat-label {
                font-size: 0.7rem;
            }
        }

        @media (max-width: 480px) {
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
            }

            .stat-card {
                padding: 12px;
                gap: 4px;
                min-height: 80px;
            }

            .stat-icon {
                font-size: 1.4rem;
            }

            .stat-value {
                font-size: 1.1rem;
            }

            .stat-label {
                font-size: 0.65rem;
            }
        }

        /* Mobile adaptations */
        @media (max-width: 768px) {
            .user-card {
                padding: 20px;
                gap: 16px;
            }

            .user-avatar {
                width: 70px;
                height: 70px;
            }

            .avatar-icon {
                width: 70px;
                height: 70px;
                font-size: 2rem;
            }

            .user-name {
                font-size: 1.5rem;
            }

            .user-id {
                font-size: 0.9rem;
            }

            .mini-stat {
                padding: 10px 12px;
                min-width: 60px;
            }

            .mini-stat-value {
                font-size: 1.1rem;
            }

            .mini-stat-label {
                font-size: 0.65rem;
            }

            .profile-container {
                margin-bottom: 100px;
            }

            .profile-container {
                padding: 85px 15px 100px 15px;
            }


            .profile-header h1 {
                font-size: 2rem;
            }

            .back-button {
                top: 10px;
                left: 10px;
                padding: 10px 16px;
                font-size: 0.9rem;
            }

            .profile-tabs {
                flex-wrap: nowrap;
                overflow-x: auto;
            }

            .profile-tab-btn {
                padding: 10px 12px;
                font-size: 0.8rem;
                min-width: 80px;
            }

        }

        /* Removed - moved to top */

        /* Fix stat cards background */
        .stat-card {
            background: rgba(255, 255, 255, 0.06) !important;
            backdrop-filter: blur(20px) !important;
            border: 1px solid rgba(255, 255, 255, 0.12) !important;
            border-radius: 16px !important;
            color: white !important;
        }

        .stat-card::before {
            background: linear-gradient(135deg, rgba(120, 219, 255, 0.02) 0%, rgba(255, 119, 198, 0.02) 100%) !important;
        }

        /* Admin Panel Styles */
        .admin-panel {
            padding: 20px 0;
        }

        .admin-section h3 {
            color: #ff6b6b;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .admin-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 12px;
            margin-bottom: 30px;
        }

        .admin-btn {
            background: rgba(255, 107, 107, 0.1);
            border: 1px solid rgba(255, 107, 107, 0.3);
            color: #ff6b6b;
            padding: 12px 16px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .admin-btn:hover {
            background: rgba(255, 107, 107, 0.2);
            transform: translateY(-2px);
        }

        .admin-info {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 16px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .admin-info h4 {
            color: #78dbff;
            margin-bottom: 12px;
            font-size: 1rem;
        }

        .info-grid {
            display: grid;
            gap: 8px;
        }

        .info-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .info-item:last-child {
            border-bottom: none;
        }

        .info-label {
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.9rem;
        }

        .info-value {
            font-weight: 600;
            font-size: 0.9rem;
        }

        /* Ensure tab buttons are clickable */
        .profile-tab-btn {
            pointer-events: auto !important;
            cursor: pointer !important;
            user-select: none !important;
        }
        
        /* Profile editing styles */
        .profile-edit-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
            width: 100%;
        }
        
        .edit-label {
            color: rgba(255, 255, 255, 0.9);
            font-weight: 600;
            font-size: 0.9rem;
        }
        
        .edit-controls {
            display: flex;
            gap: 12px;
            align-items: center;
        }
        
        .profile-input {
            flex: 1;
            padding: 10px 12px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: white;
            font-size: 0.9rem;
        }
        
        .profile-input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }
        
        .edit-btn {
            padding: 8px 16px;
            background: rgba(120, 219, 255, 0.2);
            border: 1px solid rgba(120, 219, 255, 0.4);
            color: #78dbff;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.3s ease;
        }
        
        .edit-btn:hover {
            background: rgba(120, 219, 255, 0.3);
            transform: translateY(-1px);
        }
        
        
        /* Avatar camera button */
        .user-card .user-avatar {
            position: relative !important;
        }
        
        .avatar-camera-overlay {
            position: absolute !important;
            top: 0 !important;
            left: 0 !important;
            width: 100% !important;
            height: 100% !important;
            border-radius: 50% !important;
            background: rgba(0, 0, 0, 0.3) !important;
            border: none !important;
            color: rgba(255, 255, 255, 0.8) !important;
            font-size: 1.5rem !important;
            cursor: pointer !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            transition: all 0.3s ease !important;
            backdrop-filter: blur(5px) !important;
            z-index: 10 !important;
            opacity: 0 !important;
        }
        
        .user-avatar:hover .avatar-camera-overlay {
            opacity: 1 !important;
        }
        
        .avatar-camera-overlay:hover {
            background: rgba(0, 0, 0, 0.5) !important;
        }
        
        /* Styles moved to main styles.css */
    </style>
</head>
<body>
    <script>
        setInterval(() => {
            document.querySelectorAll('a').forEach(link => {
                if (link.href && link.href.includes('t.me')) {
                    link.style.display = 'none';
                }
            });
        }, 200);
    </script>
    <div class="profile-container">
            <!-- User Card -->
            <div class="user-card">
                <div class="user-avatar" id="user-avatar">
                    <div class="avatar-icon" id="avatar-icon">üë§</div>
                    <div class="avatar-ring"></div>
                    <button class="avatar-camera-overlay" id="avatar-camera-btn">üì∑</button>
                    <input type="file" id="avatar-file-input" accept="image/*" style="display: none;">
                </div>
                <div class="user-info">
                    <div class="user-name" id="user-name">–ò–≥—Ä–æ–∫</div>
                    <div class="user-id" id="user-id">#123456</div>
                </div>
            </div>

            <!-- Profile Tabs -->
            <div class="profile-tabs">
                <button class="profile-tab-btn active" data-tab="stats">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</button>
                <button class="profile-tab-btn" data-tab="settings">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
                <button class="profile-tab-btn admin-only" data-tab="admin" style="display: none;">üëë –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å</button>
            </div>

            <!-- Stats Tab -->
            <div id="stats-tab" class="profile-tab-content active">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">üéÆ</div>
                        <div class="stat-info">
                            <div class="stat-value" id="profile-games-played">0</div>
                            <div class="stat-label">–ò–≥—Ä —Å—ã–≥—Ä–∞–Ω–æ</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üèÜ</div>
                        <div class="stat-info">
                            <div class="stat-value" id="profile-best-score">0</div>
                            <div class="stat-label">–õ—É—á—à–∏–π —Å—á—ë—Ç</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üí∞</div>
                        <div class="stat-info">
                            <div class="stat-value" id="profile-coins">0</div>
                            <div class="stat-label">–ú–æ–Ω–µ—Ç—ã</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">ü•á</div>
                        <div class="stat-info">
                            <div class="stat-value" id="profile-wins">0</div>
                            <div class="stat-label">–ü–æ–±–µ–¥</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üé≤</div>
                        <div class="stat-info">
                            <div class="stat-value" id="profile-highest-tile">0</div>
                            <div class="stat-label">–í—ã—Å—à–∞—è –ø–ª–∏—Ç–∫–∞</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Settings Tab -->
            <div id="settings-tab" class="profile-tab-content">
                <div class="profile-settings">
                    <div class="settings-section">
                        <h3>üë§ –ü—Ä–æ—Ñ–∏–ª—å</h3>
                        <div class="settings-group">
                            <label class="profile-edit-group">
                                <span class="edit-label">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:</span>
                                <div class="edit-controls">
                                    <input type="text" id="username-input" class="profile-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è">
                                    <button id="change-name-btn" class="edit-btn">–ò–∑–º–µ–Ω–∏—Ç—å</button>
                                </div>
                            </label>
                        </div>
                    </div>
                    
                    <div class="settings-section">
                        <h3>üîä –ó–≤—É–∫ –∏ –≤–∏–±—Ä–∞—Ü–∏—è</h3>
                        <div class="settings-group">
                            <label class="settings-toggle">
                                <input type="checkbox" id="profile-sound-toggle" checked>
                                <span class="toggle-slider"></span>
                                <span class="toggle-label">–í–∫–ª—é—á–∏—Ç—å –∑–≤—É–∫</span>
                            </label>
                        </div>
                        <div class="settings-group">
                            <label class="volume-control">
                                <span class="volume-label">–ì—Ä–æ–º–∫–æ—Å—Ç—å:</span>
                                <input type="range" id="profile-volume-slider" min="0" max="100" value="50">
                                <span class="volume-value" id="profile-volume-value">50%</span>
                            </label>
                        </div>
                        <div class="settings-group">
                            <label class="settings-toggle">
                                <input type="checkbox" id="vibration-toggle" checked>
                                <span class="toggle-slider"></span>
                                <span class="toggle-label">üì≥ –í–∏–±—Ä–∞—Ü–∏—è</span>
                            </label>
                        </div>
                        <div class="settings-group">
                            <button id="test-vibration" class="btn btn-secondary">–¢–µ—Å—Ç –≤–∏–±—Ä–∞—Ü–∏–∏</button>
                        </div>
                    </div>

                    <div class="settings-section">
                        <h3>üéÆ –ò–≥—Ä–∞</h3>
                        <div class="settings-group">
                            <label class="settings-toggle">
                                <input type="checkbox" id="animations-toggle" checked>
                                <span class="toggle-slider"></span>
                                <span class="toggle-label">–ê–Ω–∏–º–∞—Ü–∏–∏</span>
                            </label>
                        </div>
                    </div>

                    <div class="settings-section">
                        <h3>üåô –¢–µ–º–∞</h3>
                        <div class="theme-selector">
                            <button class="theme-btn active" data-theme="dark">
                                <span class="theme-icon">üåô</span>
                                <span class="theme-name">–¢—ë–º–Ω–∞—è</span>
                            </button>
                            <button class="theme-btn disabled" data-theme="light">
                                <span class="theme-icon">‚òÄÔ∏è</span>
                                <span class="theme-name">–°–≤–µ—Ç–ª–∞—è</span>
                                <span class="coming-soon">–°–∫–æ—Ä–æ</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Admin Panel Tab -->
            <div id="admin-tab" class="profile-tab-content">
                <div class="admin-panel">
                    <div class="admin-header">
                        <h2>üëë –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å</h2>
                        <p class="admin-subtitle">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–π –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</p>
                    </div>
                    
                    <!-- Admin Tabs -->
                    <div class="admin-tabs">
                        <button class="admin-tab-btn active" data-admin-tab="stats">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</button>
                        <button class="admin-tab-btn" data-admin-tab="skins">üé® –°–∫–∏–Ω—ã</button>
                        <button class="admin-tab-btn" data-admin-tab="boosters">üéØ –ë—É—Å—Ç–µ—Ä—ã</button>
                        <button class="admin-tab-btn" data-admin-tab="users">üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</button>
                        <button class="admin-tab-btn" data-admin-tab="settings">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
                    </div>
                    
                    <!-- Statistics Tab -->
                    <div id="admin-stats-tab" class="admin-tab-content active">
                        <div class="stats-cards">
                            <div class="admin-stat-card">
                                <div class="stat-icon">üë•</div>
                                <div class="stat-value" id="admin-total-users">0</div>
                                <div class="stat-label">–í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</div>
                            </div>
                            <div class="admin-stat-card">
                                <div class="stat-icon">üéÆ</div>
                                <div class="stat-value" id="admin-active-players">0</div>
                                <div class="stat-label">–ê–∫—Ç–∏–≤–Ω—ã—Ö –∏–≥—Ä–æ–∫–æ–≤</div>
                            </div>
                            <div class="admin-stat-card">
                                <div class="stat-icon">üèÜ</div>
                                <div class="stat-value" id="admin-top-score">0</div>
                                <div class="stat-label">–õ—É—á—à–∏–π —Å—á–µ—Ç</div>
                            </div>
                            <div class="admin-stat-card">
                                <div class="stat-icon">üìà</div>
                                <div class="stat-value" id="admin-avg-score">0</div>
                                <div class="stat-label">–°—Ä–µ–¥–Ω–∏–π —Å—á–µ—Ç</div>
                            </div>
                        </div>
                        
                        <div class="admin-section">
                            <h3>üèÜ –¢–æ–ø-10 –∏–≥—Ä–æ–∫–æ–≤</h3>
                            <div class="top-players-list" id="admin-top-players">
                                <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Skins Management Tab -->
                    <div id="admin-skins-tab" class="admin-tab-content">
                        <div class="admin-section">
                            <h3>üé® –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∫–∏–Ω–∞–º–∏</h3>
                            <p style="color: rgba(255, 255, 255, 0.6); margin-bottom: 20px;">–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ü–µ–Ω –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Å–∫–∏–Ω–æ–≤</p>
                            
                            <div class="skins-admin-grid" id="admin-skins-list">
                                <!-- Skins will be populated by JavaScript -->
                            </div>
                        </div>
                        
                        <div class="admin-section">
                            <h3>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∫–∏–Ω–æ–≤</h3>
                            <div class="skin-stats-cards">
                                <div class="stat-card-admin">
                                    <div class="stat-icon">üé®</div>
                                    <div class="stat-value" id="total-skins-count">8</div>
                                    <div class="stat-label">–í—Å–µ–≥–æ —Å–∫–∏–Ω–æ–≤</div>
                                </div>
                                <div class="stat-card-admin">
                                    <div class="stat-icon">üí∞</div>
                                    <div class="stat-value" id="skins-revenue">0</div>
                                    <div class="stat-label">–ó–∞—Ä–∞–±–æ—Ç–∞–Ω–æ –º–æ–Ω–µ—Ç</div>
                                </div>
                                <div class="stat-card-admin">
                                    <div class="stat-icon">‚≠ê</div>
                                    <div class="stat-value" id="skins-stars">0</div>
                                    <div class="stat-label">–ó–∞—Ä–∞–±–æ—Ç–∞–Ω–æ Stars</div>
                                </div>
                            </div>
                            
                            <h4 style="margin: 30px 0 15px;">üèÜ –¢–æ–ø –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Å–∫–∏–Ω–æ–≤</h4>
                            <div class="popular-skins-list" id="popular-skins">
                                <!-- Will be populated by JavaScript -->
                            </div>
                        </div>
                    </div>
                    
                    <!-- Boosters Management Tab -->
                    <div id="admin-boosters-tab" class="admin-tab-content">
                        <div class="admin-section">
                            <h3>üí∞ –¶–µ–Ω—ã –Ω–∞ –±—É—Å—Ç–µ—Ä—ã</h3>
                            <div class="booster-prices-grid">
                                <div class="booster-price-card">
                                    <div class="booster-icon-large">‚ü≤</div>
                                    <h4>–û—Ç–º–µ–Ω–∞ —Ö–æ–¥–∞</h4>
                                    <div class="price-controls">
                                        <label>üí∞ –ú–æ–Ω–µ—Ç—ã:</label>
                                        <input type="number" id="undo-price" value="50" min="1" max="1000">
                                    </div>
                                    <div class="price-controls">
                                        <label>‚≠ê Stars:</label>
                                        <input type="number" id="undo-stars" value="3" min="1" max="100">
                                    </div>
                                    <button class="btn-save-price" onclick="saveBoosterPrice('undo')">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                                </div>
                                
                                <div class="booster-price-card">
                                    <div class="booster-icon-large">‚ö°</div>
                                    <h4>–ü–µ—Ä–µ–º–µ—à–∞—Ç—å</h4>
                                    <div class="price-controls">
                                        <label>üí∞ –ú–æ–Ω–µ—Ç—ã:</label>
                                        <input type="number" id="shuffle-price" value="75" min="1" max="1000">
                                    </div>
                                    <div class="price-controls">
                                        <label>‚≠ê Stars:</label>
                                        <input type="number" id="shuffle-stars" value="4" min="1" max="100">
                                    </div>
                                    <button class="btn-save-price" onclick="saveBoosterPrice('shuffle')">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                                </div>
                                
                                <div class="booster-price-card">
                                    <div class="booster-icon-large">üí£</div>
                                    <h4>–ë–æ–º–±–∞</h4>
                                    <div class="price-controls">
                                        <label>üí∞ –ú–æ–Ω–µ—Ç—ã:</label>
                                        <input type="number" id="bomb-price" value="100" min="1" max="1000">
                                    </div>
                                    <div class="price-controls">
                                        <label>‚≠ê Stars:</label>
                                        <input type="number" id="bomb-stars" value="5" min="1" max="100">
                                    </div>
                                    <button class="btn-save-price" onclick="saveBoosterPrice('bomb')">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                                </div>
                                
                                <div class="booster-price-card">
                                    <div class="booster-icon-large">üíñ</div>
                                    <h4>–ñ–∏–∑–Ω—å</h4>
                                    <div class="price-controls">
                                        <label>üí∞ –ú–æ–Ω–µ—Ç—ã:</label>
                                        <input type="number" id="life-price" value="150" min="1" max="1000">
                                    </div>
                                    <div class="price-controls">
                                        <label>‚≠ê Stars:</label>
                                        <input type="number" id="life-stars" value="8" min="1" max="100">
                                    </div>
                                    <button class="btn-save-price" onclick="saveBoosterPrice('life')">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="admin-section">
                            <h3>üéÅ –ù–∞—á–∏—Å–ª–∏—Ç—å –±—É—Å—Ç–µ—Ä—ã</h3>
                            
                            <!-- Quick grant to self -->
                            <div class="quick-grant" style="margin-bottom: 20px; padding: 16px; background: rgba(255, 215, 0, 0.1); border-radius: 12px; border: 1px solid rgba(255, 215, 0, 0.3);">
                                <h4 style="margin: 0 0 12px 0; color: #FFD700; font-size: 1rem;">‚ö° –ë—ã—Å—Ç—Ä–æ–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ —Å–µ–±–µ</h4>
                                <div style="display: flex; gap: 8px; flex-wrap: wrap;">
                                    <select id="quick-booster-type" style="flex: 1; min-width: 150px; padding: 10px; background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; color: white;">
                                        <option value="undo">‚ü≤ –û—Ç–º–µ–Ω–∞ —Ö–æ–¥–∞</option>
                                        <option value="shuffle">‚ö° –ü–µ—Ä–µ–º–µ—à–∞—Ç—å</option>
                                        <option value="bomb">üí£ –ë–æ–º–±–∞</option>
                                        <option value="life">üíñ –ñ–∏–∑–Ω—å</option>
                                    </select>
                                    <input type="number" id="quick-booster-amount" placeholder="–ö–æ–ª-–≤–æ" value="10" min="1" max="100" style="width: 80px; padding: 10px; background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; color: white; text-align: center;">
                                    <button class="btn-grant-booster" onclick="grantToSelf()" style="white-space: nowrap;">–ù–∞—á–∏—Å–ª–∏—Ç—å —Å–µ–±–µ</button>
                                </div>
                            </div>
                            
                            <!-- Grant to other user -->
                            <div class="grant-booster-form">
                                <p style="color: rgba(255, 255, 255, 0.6); font-size: 0.9rem; margin-bottom: 8px;">–ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –¥—Ä—É–≥–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é (—Ç—Ä–µ–±—É–µ—Ç backend):</p>
                                <input type="text" id="grant-user-id" placeholder="ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è">
                                <select id="grant-booster-type">
                                    <option value="undo">‚ü≤ –û—Ç–º–µ–Ω–∞ —Ö–æ–¥–∞</option>
                                    <option value="shuffle">‚ö° –ü–µ—Ä–µ–º–µ—à–∞—Ç—å</option>
                                    <option value="bomb">üí£ –ë–æ–º–±–∞</option>
                                    <option value="life">üíñ –ñ–∏–∑–Ω—å</option>
                                </select>
                                <input type="number" id="grant-booster-amount" placeholder="–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ" value="1" min="1" max="100">
                                <button class="btn-grant-booster" onclick="grantBooster()">–ù–∞—á–∏—Å–ª–∏—Ç—å –¥—Ä—É–≥–æ–º—É</button>
                            </div>
                        </div>
                        
                        <div class="admin-section">
                            <h3>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –±—É—Å—Ç–µ—Ä–æ–≤</h3>
                            <div class="booster-stats-grid">
                                <div class="stat-card-admin">
                                    <div class="stat-icon">‚ü≤</div>
                                    <div class="stat-value" id="undo-used-count">0</div>
                                    <div class="stat-label">–û—Ç–º–µ–Ω–∞ —Ö–æ–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ</div>
                                </div>
                                <div class="stat-card-admin">
                                    <div class="stat-icon">‚ö°</div>
                                    <div class="stat-value" id="shuffle-used-count">0</div>
                                    <div class="stat-label">–ü–µ—Ä–µ–º–µ—à–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ</div>
                                </div>
                                <div class="stat-card-admin">
                                    <div class="stat-icon">üí£</div>
                                    <div class="stat-value" id="bomb-used-count">0</div>
                                    <div class="stat-label">–ë–æ–º–±–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ</div>
                                </div>
                                <div class="stat-card-admin">
                                    <div class="stat-icon">üíñ</div>
                                    <div class="stat-value" id="life-used-count">0</div>
                                    <div class="stat-label">–ñ–∏–∑–Ω—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Users Tab -->
                    <div id="admin-users-tab" class="admin-tab-content">
                        <div class="admin-section">
                            <div class="search-bar">
                                <input type="text" id="admin-user-search" placeholder="üîç –ü–æ–∏—Å–∫ –ø–æ username –∏–ª–∏ ID...">
                                <button class="btn-refresh" onclick="loadAllUsers()">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button>
                            </div>
                            
                            <div class="users-list" id="admin-users-list">
                                <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π...</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Settings Tab -->
                    <div id="admin-settings-tab" class="admin-tab-content">
                        <div class="admin-section">
                            <h3>üéÆ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–≥—Ä—ã</h3>
                            <div class="settings-form">
                                <div class="form-group">
                                    <label>üí∞ –ù–∞—á–∞–ª—å–Ω—ã–µ –º–æ–Ω–µ—Ç—ã</label>
                                    <input type="number" id="setting-initial-coins" value="1000" min="0" step="100">
                                    <small>–ú–æ–Ω–µ—Ç—ã –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –∏–≥—Ä—ã</small>
                                </div>
                                
                                <div class="form-group">
                                    <label>üéÅ –ë–æ–Ω—É—Å –∑–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é</label>
                                    <input type="number" id="setting-registration-bonus" value="500" min="0" step="100">
                                    <small>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–æ–Ω–µ—Ç—ã –∑–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é</small>
                                </div>
                                
                                <div class="form-group">
                                    <label>üèÜ –ë–æ–Ω—É—Å –∑–∞ –ø–µ—Ä–≤—É—é –ø–æ–±–µ–¥—É</label>
                                    <input type="number" id="setting-first-win-bonus" value="1000" min="0" step="100">
                                    <small>–ú–æ–Ω–µ—Ç—ã –∑–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ 2048</small>
                                </div>
                                
                                <div class="form-group">
                                    <label>üìä –ú–æ–Ω–µ—Ç—ã –∑–∞ –æ—á–∫–∏ (–º–Ω–æ–∂–∏—Ç–µ–ª—å)</label>
                                    <input type="number" id="setting-score-multiplier" value="0.1" min="0" step="0.01">
                                    <small>–ú–æ–Ω–µ—Ç—ã = –û—á–∫–∏ √ó –ú–Ω–æ–∂–∏—Ç–µ–ª—å</small>
                                </div>
                                
                                <button class="btn-primary" onclick="saveGameSettings()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
                            </div>
                        </div>
                        
                        <div class="admin-section">
                            <h3>üéÅ –ë–æ–Ω—É—Å—ã –∏ –Ω–∞–≥—Ä–∞–¥—ã</h3>
                            <div class="settings-form">
                                <div class="form-group">
                                    <label>‚è∞ –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –±–æ–Ω—É—Å</label>
                                    <input type="number" id="setting-daily-bonus" value="100" min="0" step="50">
                                    <small>–ú–æ–Ω–µ—Ç—ã –∑–∞ –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–π –≤—Ö–æ–¥</small>
                                </div>
                                
                                <div class="form-group">
                                    <label>üéØ –ë–æ–Ω—É—Å –∑–∞ –∑–∞–¥–∞–Ω–∏–µ</label>
                                    <input type="number" id="setting-quest-reward" value="200" min="0" step="50">
                                    <small>–ú–æ–Ω–µ—Ç—ã –∑–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞–Ω–∏–π</small>
                                </div>
                                
                                <button class="btn-primary" onclick="saveBonusSettings()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –±–æ–Ω—É—Å—ã</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
    </div>

    <!-- Scripts with version control -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="js/telegram-integration.js?v=1.2.1"></script>
    <script src="js/database.js?v=1.2.1"></script>
    <script src="js/userManager.js?v=1.2.1"></script>
    <script src="js/skinConfigs.js?v=1.2.1"></script>
    <script src="js/vibration.js?v=1.2.1"></script>
    <script src="js/profile.js?v=1.2.1"></script>
    <script src="js/leaderboard.js?v=1.2.1"></script>
    
    <script>
        // Admin Panel JavaScript
        let adminData = {
            users: [],
            stats: {
                totalUsers: 0,
                activePlayers: 0,
                topScore: 0,
                avgScore: 0
            }
        };

        // Check if user is admin
        function checkAdminAccess() {
            // Get admin list from localStorage
            const adminList = getAdminList();
            
            // Get current user from Telegram integration
            const telegramUser = window.telegramIntegration?.getUserProfile();
            
            if (telegramUser && adminList.includes(telegramUser.telegramId)) {
                // Show admin panel button
                const adminBtn = document.querySelector('.admin-only');
                if (adminBtn) {
                    adminBtn.style.display = 'block';
                    console.log('üëë Admin access granted');
                    initAdminPanel();
                }
                return true;
            }
            
            return false;
        }

        // Initialize Admin Panel
        function initAdminPanel() {
            setupAdminTabs();
            loadAdminData();
            loadAdminSettings();
        }

        // Setup Admin Tabs
        function setupAdminTabs() {
            const adminTabBtns = document.querySelectorAll('.admin-tab-btn');
            const adminTabContents = document.querySelectorAll('.admin-tab-content');

            adminTabBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    const targetTab = btn.getAttribute('data-admin-tab');
                    
                    // Remove active class from all buttons and contents
                    adminTabBtns.forEach(b => b.classList.remove('active'));
                    adminTabContents.forEach(c => c.classList.remove('active'));
                    
                    // Add active class to clicked button and corresponding content
                    btn.classList.add('active');
                    document.getElementById(`admin-${targetTab}-tab`).classList.add('active');
                    
                    // Load data for specific tab
                    if (targetTab === 'users') {
                        loadAllUsers();
                    }
                });
            });
        }

        // Load Admin Data
        function loadAdminData() {
            const allUsers = getAllUsers();
            const leaderboard = window.leaderboardManager?.leaderboard || [];
            
            // Calculate stats
            const totalUsers = allUsers.length;
            const activePlayers = allUsers.filter(u => u.lastActive && 
                Date.now() - u.lastActive < 7 * 24 * 60 * 60 * 1000).length;
            const topScore = Math.max(...leaderboard.map(u => u.bestScore || 0), 0);
            const avgScore = leaderboard.length > 0 ? 
                Math.round(leaderboard.reduce((sum, u) => sum + (u.bestScore || 0), 0) / leaderboard.length) : 0;
            
            // Update display
            document.getElementById('admin-total-users').textContent = totalUsers;
            document.getElementById('admin-active-players').textContent = activePlayers;
            document.getElementById('admin-top-score').textContent = topScore.toLocaleString();
            document.getElementById('admin-avg-score').textContent = avgScore.toLocaleString();
            
            loadTopPlayers();
        }

        // Get all users
        function getAllUsers() {
            const users = [];
            const leaderboard = window.leaderboardManager?.leaderboard || [];
            users.push(...leaderboard);
            
            const currentUser = window.leaderboardManager?.currentUser;
            if (currentUser && !users.find(u => u.id === currentUser.id)) {
                users.push(currentUser);
            }
            
            const telegramUser = window.telegramIntegration?.getUserProfile();
            if (telegramUser && !users.find(u => u.telegramId === telegramUser.telegramId)) {
                users.push({
                    id: telegramUser.telegramId,
                    name: telegramUser.displayName,
                    avatar: telegramUser.avatar,
                    telegramId: telegramUser.telegramId,
                    bestScore: 0,
                    gamesPlayed: 0,
                    lastActive: Date.now()
                });
            }
            
            return users;
        }

        // Load Top Players
        function loadTopPlayers() {
            const container = document.getElementById('admin-top-players');
            const leaderboard = window.leaderboardManager?.leaderboard || [];
            const topPlayers = leaderboard.slice(0, 10);
            
            if (topPlayers.length === 0) {
                container.innerHTML = '<div class="loading">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –∏–≥—Ä–æ–∫–∞—Ö</div>';
                return;
            }
            
            container.innerHTML = topPlayers.map((player, index) => `
                <div class="player-item">
                    <div class="user-avatar-small" id="admin-avatar-${index}"></div>
                    <div class="user-info-small">
                        <div class="user-name-small">#${index + 1} ${player.name || '–ò–≥—Ä–æ–∫'}</div>
                        <div class="user-details-small">–°—á–µ—Ç: ${(player.bestScore || 0).toLocaleString()} ‚Ä¢ –ò–≥—Ä: ${player.gamesPlayed || 0}</div>
                    </div>
                </div>
            `).join('');
            
            // Set avatars after DOM creation
            topPlayers.forEach((player, index) => {
                setAdminAvatar(`admin-avatar-${index}`, player);
            });
        }

        // Load All Users
        function loadAllUsers() {
            const container = document.getElementById('admin-users-list');
            const users = getAllUsers();
            
            if (users.length === 0) {
                container.innerHTML = '<div class="loading">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</div>';
                return;
            }
            
            container.innerHTML = users.map((user, index) => `
                <div class="user-item">
                    <div class="user-avatar-small" id="admin-user-avatar-${index}"></div>
                    <div class="user-info-small">
                        <div class="user-name-small">${user.name || '–ò–≥—Ä–æ–∫'}</div>
                        <div class="user-details-small">
                            ID: ${user.id || user.telegramId || 'N/A'} ‚Ä¢ 
                            –°—á–µ—Ç: ${(user.bestScore || 0).toLocaleString()} ‚Ä¢ 
                            –ò–≥—Ä: ${user.gamesPlayed || 0}
                        </div>
                    </div>
                    <div class="user-actions">
                        <button class="btn-admin-toggle ${isUserAdmin(user) ? 'admin-active' : ''}" 
                                onclick="toggleUserAdmin('${user.id || user.telegramId}', ${index})">
                            ${isUserAdmin(user) ? 'üëë –ê–¥–º–∏–Ω' : 'üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å'}
                        </button>
                    </div>
                </div>
            `).join('');
            
            // Set avatars after DOM creation
            users.forEach((user, index) => {
                setAdminAvatar(`admin-user-avatar-${index}`, user);
            });
        }

        // Save Settings Functions
        function saveGameSettings() {
            const settings = {
                initialCoins: parseInt(document.getElementById('setting-initial-coins').value) || 1000,
                registrationBonus: parseInt(document.getElementById('setting-registration-bonus').value) || 500,
                firstWinBonus: parseInt(document.getElementById('setting-first-win-bonus').value) || 1000,
                scoreMultiplier: parseFloat(document.getElementById('setting-score-multiplier').value) || 0.1
            };
            
            localStorage.setItem('gameSettings', JSON.stringify(settings));
            alert('‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–≥—Ä—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!');
        }

        function saveBonusSettings() {
            const bonusSettings = {
                dailyBonus: parseInt(document.getElementById('setting-daily-bonus').value) || 100,
                questReward: parseInt(document.getElementById('setting-quest-reward').value) || 200
            };
            
            localStorage.setItem('bonusSettings', JSON.stringify(bonusSettings));
            alert('‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ–Ω—É—Å–æ–≤ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!');
        }

        // Admin Management Functions
        function getAdminList() {
            const adminList = JSON.parse(localStorage.getItem('adminList') || '[]');
            // Always include the main admin
            const MAIN_ADMIN = 5414042665;
            if (!adminList.includes(MAIN_ADMIN)) {
                adminList.push(MAIN_ADMIN);
                localStorage.setItem('adminList', JSON.stringify(adminList));
            }
            return adminList;
        }

        function isUserAdmin(user) {
            const adminList = getAdminList();
            const userId = parseInt(user.id || user.telegramId);
            return adminList.includes(userId);
        }

        function toggleUserAdmin(userId, userIndex) {
            const adminList = getAdminList();
            const userIdNum = parseInt(userId);
            const MAIN_ADMIN = 5414042665;
            
            // Prevent removing main admin
            if (userIdNum === MAIN_ADMIN) {
                alert('‚ùå –ù–µ–ª—å–∑—è —É–±—Ä–∞—Ç—å –ø—Ä–∞–≤–∞ —É –≥–ª–∞–≤–Ω–æ–≥–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞!');
                return;
            }
            
            const isCurrentlyAdmin = adminList.includes(userIdNum);
            
            if (isCurrentlyAdmin) {
                // Remove admin rights
                const index = adminList.indexOf(userIdNum);
                adminList.splice(index, 1);
                alert('‚úÖ –ê–¥–º–∏–Ω—Å–∫–∏–µ –ø—Ä–∞–≤–∞ —É–±—Ä–∞–Ω—ã!');
            } else {
                // Add admin rights
                adminList.push(userIdNum);
                alert('‚úÖ –ê–¥–º–∏–Ω—Å–∫–∏–µ –ø—Ä–∞–≤–∞ –≤—ã–¥–∞–Ω—ã!');
            }
            
            localStorage.setItem('adminList', JSON.stringify(adminList));
            
            // Update button
            const button = document.querySelector(`button[onclick*="${userId}"]`);
            if (button) {
                const newIsAdmin = adminList.includes(userIdNum);
                button.textContent = newIsAdmin ? 'üëë –ê–¥–º–∏–Ω' : 'üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å';
                button.className = `btn-admin-toggle ${newIsAdmin ? 'admin-active' : ''}`;
            }
            
            console.log('Updated admin list:', adminList);
        }

        // Load Admin Settings
        function loadAdminSettings() {
            // Load game settings
            const gameSettings = JSON.parse(localStorage.getItem('gameSettings') || '{}');
            
            // Load saved skin settings from localStorage
            const skinSettings = JSON.parse(localStorage.getItem('skinSettings')) || {};
            const skinPrices = JSON.parse(localStorage.getItem('skinPrices')) || {};
            
            Object.entries(window.SKIN_CONFIGS).forEach(([skinId, skin]) => {
                // Apply saved enabled status
                if (skinSettings[skinId]) {
                    skin.enabled = skinSettings[skinId].enabled;
                }
                
                // Apply saved prices
                if (skinPrices[skinId]) {
                    skin.priceStars = skinPrices[skinId].stars;
                    skin.price = skinPrices[skinId].coins;
                }
            });
            
            // Display settings if available
            console.log('‚úÖ Admin settings loaded (skins enabled/prices restored)');
            
            // Set default values if not found
            const defaultGameSettings = {
                initialCoins: 1000,
                registrationBonus: 500,
                firstWinBonus: 1000,
                scoreMultiplier: 0.1
            };
            
            const finalGameSettings = { ...defaultGameSettings, ...gameSettings };
            
            // Update form fields
            document.getElementById('setting-initial-coins').value = finalGameSettings.initialCoins;
            document.getElementById('setting-registration-bonus').value = finalGameSettings.registrationBonus;
            document.getElementById('setting-first-win-bonus').value = finalGameSettings.firstWinBonus;
            document.getElementById('setting-score-multiplier').value = finalGameSettings.scoreMultiplier;
            
            // Load bonus settings
            const bonusSettings = JSON.parse(localStorage.getItem('bonusSettings') || '{}');
            
            const defaultBonusSettings = {
                dailyBonus: 100,
                questReward: 200
            };
            
            const finalBonusSettings = { ...defaultBonusSettings, ...bonusSettings };
            
            // Update bonus form fields
            document.getElementById('setting-daily-bonus').value = finalBonusSettings.dailyBonus;
            document.getElementById('setting-quest-reward').value = finalBonusSettings.questReward;
            
            console.log('Admin settings loaded:', { finalGameSettings, finalBonusSettings });
        }

        // Set Admin Avatar (similar to leaderboard avatar function)
        function setAdminAvatar(elementId, user) {
            const avatarElement = document.getElementById(elementId);
            if (!avatarElement) return;

            // Check for Telegram user photo
            const telegramUser = localStorage.getItem('telegram_user');
            let photoUrl = null;
            
            // If this is the current user, check for their Telegram photo
            if (user.id === window.leaderboardManager?.currentUser?.id && telegramUser) {
                try {
                    const tgUser = JSON.parse(telegramUser);
                    photoUrl = tgUser.photoUrl;
                } catch (e) {
                    console.error('Error parsing telegram user:', e);
                }
            }

            // If we have a photo URL from Telegram, use it
            if (photoUrl && photoUrl.includes('t.me')) {
                // Create image element
                const img = document.createElement('img');
                img.src = photoUrl;
                img.style.width = '100%';
                img.style.height = '100%';
                img.style.borderRadius = '50%';
                img.style.objectFit = 'cover';
                
                // Handle load error - fallback to emoji
                img.onerror = () => {
                    avatarElement.innerHTML = '';
                    avatarElement.textContent = user.avatar || 'üë§';
                };
                
                // Handle successful load
                img.onload = () => {
                    console.log('Admin avatar image loaded successfully:', photoUrl);
                };
                
                avatarElement.innerHTML = '';
                avatarElement.appendChild(img);
            } else {
                // Use emoji avatar
                avatarElement.innerHTML = '';
                avatarElement.textContent = user.avatar || 'üë§';
            }
        }
        
        // Function to update profile avatar
        function updateProfileAvatar(user) {
            const avatarIcon = document.getElementById('avatar-icon');
            if (!avatarIcon) return;
            
            // –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–µ —Ñ–æ—Ç–æ > Telegram —Ñ–æ—Ç–æ > —ç–º–æ–¥–∑–∏
            let imageUrl = null;
            
            // 1. –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º —Ñ–æ—Ç–æ
            const userImage = localStorage.getItem('userAvatarImage') || user.avatarImage;
            if (userImage) {
                imageUrl = userImage;
            } else {
                // 2. –ü—Ä–æ–≤–µ—Ä—è–µ–º Telegram —Ñ–æ—Ç–æ
                const telegramUser = localStorage.getItem('telegram_user');
                if (telegramUser) {
                    try {
                        const tgUser = JSON.parse(telegramUser);
                        if (tgUser.photoUrl && tgUser.photoUrl.includes('t.me')) {
                            imageUrl = tgUser.photoUrl;
                        }
                    } catch (e) {
                        console.error('Error parsing telegram user:', e);
                    }
                }
            }
            
            // –ï—Å–ª–∏ –µ—Å—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –µ–≥–æ
            if (imageUrl) {
                avatarIcon.innerHTML = '';
                
                const img = document.createElement('img');
                img.src = imageUrl;
                img.style.width = '100%';
                img.style.height = '100%';
                img.style.borderRadius = '50%';
                img.style.objectFit = 'cover';
                
                // Handle load error - fallback to emoji
                img.onerror = () => {
                    avatarIcon.innerHTML = '';
                    avatarIcon.textContent = user.avatar || 'üë§';
                };
                
                // Handle successful load
                img.onload = () => {
                    console.log('Profile avatar image loaded successfully:', imageUrl);
                };
                
                avatarIcon.appendChild(img);
            } else {
                // 3. –ò—Å–ø–æ–ª—å–∑—É–µ–º —ç–º–æ–¥–∑–∏ –∞–≤–∞—Ç–∞—Ä
                avatarIcon.innerHTML = '';
                avatarIcon.textContent = user.avatar || 'üë§';
            }
        }
        
        // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ—Ñ–∏–ª—å —Å –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ –∏–≥—Ä—ã
        document.addEventListener('DOMContentLoaded', function() {
            // Check admin access
            setTimeout(checkAdminAccess, 500);
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ localStorage
            let bestScore, coins, gamesPlayed, highestTile;
            
            // –ü—ã—Ç–∞–µ–º—Å—è –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ userManager (–±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö)
            if (window.userManager && window.userManager.isInitialized) {
                try {
                    const userData = window.userManager.settings;
                    bestScore = userData.bestScore || 0;
                    coins = userData.coins || 1000;
                    gamesPlayed = userData.statistics?.gamesPlayed || userData.gamesPlayed || 0;
                    highestTile = userData.statistics.highestTile || 0;
                    
                    // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º –æ–±—Ä–∞—Ç–Ω–æ –≤ localStorage –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
                    localStorage.setItem('bestScore', bestScore);
                    localStorage.setItem('coins', coins);
                    localStorage.setItem('gamesPlayed', gamesPlayed);
                    localStorage.setItem('highestTile', highestTile);
                    
                    console.log('Loaded data from userManager and synced to localStorage:', userData);
                } catch (error) {
                    console.error('Error loading from userManager:', error);
                    // Fallback to localStorage
                    bestScore = parseInt(localStorage.getItem('bestScore')) || 0;
                    coins = parseInt(localStorage.getItem('coins')) || 1000;
                    gamesPlayed = parseInt(localStorage.getItem('gamesPlayed')) || 0;
                    highestTile = parseInt(localStorage.getItem('highestTile')) || 0;
                }
            } else {
                // Fallback to localStorage if userManager not available
                bestScore = parseInt(localStorage.getItem('bestScore')) || 0;
                coins = parseInt(localStorage.getItem('coins')) || 1000;
                gamesPlayed = parseInt(localStorage.getItem('gamesPlayed')) || 0;
                highestTile = parseInt(localStorage.getItem('highestTile')) || 0;
                console.log('Loaded data from localStorage (userManager not available)');
                
                // –ü–æ–ø—ã—Ç–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤ userManager –¥–ª—è –±—É–¥—É—â–∏—Ö –∑–∞–≥—Ä—É–∑–æ–∫
                setTimeout(() => {
                    if (window.userManager && window.userManager.isInitialized) {
                        try {
                            window.userManager.settings.bestScore = Math.max(window.userManager.settings.bestScore, bestScore);
                            window.userManager.settings.coins = coins;
                            window.userManager.settings.gamesPlayed = Math.max(window.userManager.settings.gamesPlayed || 0, gamesPlayed);
                            window.userManager.settings.statistics.highestTile = highestTile;
                            window.userManager.saveSettings();
                            console.log('Synced localStorage data to userManager for old user');
                        } catch (error) {
                            console.error('Error syncing to userManager:', error);
                        }
                    }
                }, 1000);
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –≤ –ø—Ä–æ—Ñ–∏–ª–µ
            const updateElement = (id, value) => {
                const el = document.getElementById(id);
                if (el) el.textContent = value;
            };
            
            // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –ø—Ä–æ—Ñ–∏–ª—è
            const updateAllProfileElements = () => {
                updateElement('profile-best-score', bestScore.toLocaleString());
                updateElement('profile-coins', coins.toLocaleString());
                updateElement('profile-games-played', gamesPlayed);
                updateElement('profile-highest-tile', highestTile);
            };
            
            // –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
            updateAllProfileElements();
            
            // –°–ª—É—à–∞—Ç–µ–ª—å –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ localStorage –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
            window.addEventListener('storage', (e) => {
                if (['bestScore', 'coins', 'gamesPlayed'].includes(e.key)) {
                    // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ
                    if (window.userManager && window.userManager.isInitialized) {
                        const userData = window.userManager.settings;
                        bestScore = userData.bestScore || 0;
                        coins = userData.coins || 1000;
                        gamesPlayed = userData.statistics?.gamesPlayed || userData.gamesPlayed || 0;
                    } else {
                        bestScore = parseInt(localStorage.getItem('bestScore')) || 0;
                        coins = parseInt(localStorage.getItem('coins')) || 1000;
                        gamesPlayed = parseInt(localStorage.getItem('gamesPlayed')) || 0;
                    }
                    updateAllProfileElements();
                    console.log('Profile auto-updated from storage change:', e.key, '=', e.newValue);
                }
            });
            
            // –¢–∞–∫–∂–µ —Å–ª—É—à–∞–µ–º —Å–æ–±—ã—Ç–∏—è –≤–Ω—É—Ç—Ä–∏ –æ–¥–Ω–æ–π –≤–∫–ª–∞–¥–∫–∏ (–¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏)
            setInterval(() => {
                if (window.userManager && window.userManager.isInitialized) {
                    const userData = window.userManager.settings;
                    const newCoins = userData.coins || 1000;
                    if (newCoins !== coins) {
                        coins = newCoins;
                        updateElement('profile-coins', coins.toLocaleString());
                        console.log('Coins updated in profile:', coins);
                    }
                }
            }, 1000); // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É
            
            // –î–æ–±–∞–≤–ª—è–µ–º –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
            let winCount = 0;
            if (window.userManager && window.userManager.isInitialized) {
                winCount = window.userManager.settings.statistics.winCount || 0;
            } else {
                winCount = parseInt(localStorage.getItem('winCount')) || 0;
            }
            updateElement('profile-wins', winCount);
            
            // –†–∞–±–æ—Ç–∞ —Å –ª–∏–¥–µ—Ä–±–æ—Ä–¥–æ–º –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω
            if (window.leaderboardManager) {
                const user = window.leaderboardManager.currentUser;
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                document.getElementById('user-name').textContent = user.name;
                updateProfileAvatar(user);
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º Telegram ID –∏–ª–∏ –æ–±—Ä–µ–∑–∞–Ω–Ω—ã–π –æ–±—ã—á–Ω—ã–π ID
                let displayId = user.telegramId || user.id;
                if (displayId.toString().length > 10) {
                    displayId = displayId.toString().substr(-6);
                }
                document.getElementById('user-id').textContent = '#' + displayId;
                
                
                // –ó–∞–ø–æ–ª–Ω—è–µ–º –ø–æ–ª—è –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö
                document.getElementById('username-input').value = user.name;
                
                // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–º–µ–Ω–∏
                document.getElementById('change-name-btn').addEventListener('click', function() {
                    const nameInput = document.getElementById('username-input');
                    const newName = nameInput.value.trim();
                    
                    if (newName && newName !== user.name) {
                        window.leaderboardManager.updateUserProfile(newName, user.avatar);
                        
                        // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
                        document.getElementById('user-name').textContent = newName;
                        user.name = newName;
                        
                        
                        alert('–ò–º—è –∏–∑–º–µ–Ω–µ–Ω–æ!');
                    } else if (!newName) {
                        alert('–í–≤–µ–¥–∏—Ç–µ –∏–º—è');
                    } else {
                        alert('–ò–º—è –Ω–µ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å');
                    }
                });
                
                // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ —Ñ–æ—Ç–æ–∞–ø–ø–∞—Ä–∞—Ç–∞ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ—Ç–æ
                const cameraBtn = document.getElementById('avatar-camera-btn');
                const fileInput = document.getElementById('avatar-file-input');
                
                if (cameraBtn && fileInput) {
                    console.log('Camera button found, adding event listener');
                    
                    // –ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∫–Ω–æ–ø–∫—É —Ñ–æ—Ç–æ–∞–ø–ø–∞—Ä–∞—Ç–∞ –æ—Ç–∫—Ä—ã–≤–∞–µ–º –≤—ã–±–æ—Ä —Ñ–∞–π–ª–∞
                    cameraBtn.addEventListener('click', function(e) {
                        e.preventDefault();
                        e.stopPropagation();
                        console.log('Camera button clicked');
                        fileInput.click();
                    });
                    
                    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤—ã–±–æ—Ä–∞ —Ñ–∞–π–ª–∞
                    fileInput.addEventListener('change', function(e) {
                        const file = e.target.files[0];
                        if (file && file.type.startsWith('image/')) {
                            console.log('Image file selected:', file.name);
                            
                            // –°–æ–∑–¥–∞–µ–º FileReader –¥–ª—è —á—Ç–µ–Ω–∏—è —Ñ–∞–π–ª–∞
                            const reader = new FileReader();
                            reader.onload = function(event) {
                                const imageDataUrl = event.target.result;
                                
                                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ localStorage
                                localStorage.setItem('userAvatarImage', imageDataUrl);
                                
                                // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                                user.avatarImage = imageDataUrl;
                                window.leaderboardManager.updateUserProfile(user.name, user.avatar, imageDataUrl);
                                
                                // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∞–≤–∞—Ç–∞—Ä–∞
                                updateProfileAvatar(user);
                                
                                // –û–±–Ω–æ–≤–ª—è–µ–º –∞–≤–∞—Ç–∞—Ä –≤ —Ç–∞–±-–±–∞—Ä–µ
                                if (window.updateToolbarAvatar) {
                                    window.updateToolbarAvatar();
                                }
                                
                                alert('–§–æ—Ç–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ!');
                            };
                            
                            reader.readAsDataURL(file);
                        } else {
                            alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ');
                        }
                    });
                } else {
                }
            }
        });
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Ç–∞–±–æ–≤ –ø—Ä–æ—Ñ–∏–ª—è
        console.log('Setting up profile tabs...');
        const tabButtons = document.querySelectorAll('.profile-tab-btn');
        console.log('Found tab buttons:', tabButtons.length);
        
        tabButtons.forEach(function(btn) {
            btn.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                
                const tabName = btn.dataset.tab;
                console.log('Tab clicked:', tabName);
                
                // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —Å–æ –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫
                document.querySelectorAll('.profile-tab-btn').forEach(function(b) {
                    b.classList.remove('active');
                });
                
                // –î–æ–±–∞–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å –∫ –Ω–∞–∂–∞—Ç–æ–π –∫–Ω–æ–ø–∫–µ
                btn.classList.add('active');
                
                // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —Ç–∞–±—ã
                document.querySelectorAll('.profile-tab-content').forEach(function(content) {
                    content.classList.remove('active');
                });
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω—É–∂–Ω—ã–π —Ç–∞–±
                const targetTab = document.getElementById(tabName + '-tab');
                if (targetTab) {
                    targetTab.classList.add('active');
                    console.log('Activated tab:', tabName + '-tab');
                } else {
                    console.error('Tab not found:', tabName + '-tab');
                }
            });
        });
        
        console.log('Profile tabs setup complete');
        
        // ===== BOOSTER MANAGEMENT FUNCTIONS =====
        
        // Load booster prices from localStorage
        function loadBoosterPrices() {
            const prices = JSON.parse(localStorage.getItem('boosterPrices')) || {};
            
            // Default values
            const defaults = {
                undo: { coins: 50, stars: 3 },
                shuffle: { coins: 75, stars: 4 },
                bomb: { coins: 100, stars: 5 }
            };
            
            // Load coins prices
            document.getElementById('undo-price').value = prices.undo?.coins || defaults.undo.coins;
            document.getElementById('shuffle-price').value = prices.shuffle?.coins || defaults.shuffle.coins;
            document.getElementById('bomb-price').value = prices.bomb?.coins || defaults.bomb.coins;
            
            // Load stars prices
            document.getElementById('undo-stars').value = prices.undo?.stars || defaults.undo.stars;
            document.getElementById('shuffle-stars').value = prices.shuffle?.stars || defaults.shuffle.stars;
            document.getElementById('bomb-stars').value = prices.bomb?.stars || defaults.bomb.stars;
        }
        
        // Save booster price
        window.saveBoosterPrice = function(boosterType) {
            const coinsInput = document.getElementById(boosterType + '-price');
            const starsInput = document.getElementById(boosterType + '-stars');
            
            const newCoinsPrice = parseInt(coinsInput.value);
            const newStarsPrice = parseInt(starsInput.value);
            
            // Validate coins price
            if (newCoinsPrice < 1 || newCoinsPrice > 1000) {
                alert('–¶–µ–Ω–∞ –≤ –º–æ–Ω–µ—Ç–∞—Ö –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—Ç 1 –¥–æ 1000');
                return;
            }
            
            // Validate stars price
            if (newStarsPrice < 1 || newStarsPrice > 100) {
                alert('–¶–µ–Ω–∞ –≤ Stars –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—Ç 1 –¥–æ 100');
                return;
            }
            
            // Get current prices
            const prices = JSON.parse(localStorage.getItem('boosterPrices')) || {};
            
            // Update price with both coins and stars
            prices[boosterType] = {
                coins: newCoinsPrice,
                stars: newStarsPrice
            };
            
            localStorage.setItem('boosterPrices', JSON.stringify(prices));
            
            alert(`‚úÖ –¶–µ–Ω—ã –¥–ª—è –±—É—Å—Ç–µ—Ä–∞ –æ–±–Ω–æ–≤–ª–µ–Ω—ã:\nüí∞ ${newCoinsPrice} –º–æ–Ω–µ—Ç\n‚≠ê ${newStarsPrice} Stars`);
            console.log('Booster prices updated:', boosterType, { coins: newCoinsPrice, stars: newStarsPrice });
        };
        
        // Quick grant to current user (self)
        window.grantToSelf = function() {
            const boosterType = document.getElementById('quick-booster-type').value;
            const amount = parseInt(document.getElementById('quick-booster-amount').value);
            
            if (amount < 1 || amount > 100) {
                alert('–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—Ç 1 –¥–æ 100');
                return;
            }
            
            // Get current count
            const currentCount = parseInt(localStorage.getItem('booster_' + boosterType)) || 0;
            const newCount = currentCount + amount;
            
            // Update localStorage
            localStorage.setItem('booster_' + boosterType, newCount);
            
            // Update userManager if available
            if (window.userManager && window.userManager.isInitialized) {
                window.userManager.settings.bonusesOwned[boosterType] = newCount;
                window.userManager.saveSettings();
            }
            
            // Show success message
            alert(`‚úÖ –ù–∞—á–∏—Å–ª–µ–Ω–æ —Å–µ–±–µ: ${amount} x ${boosterType}\n–¢–µ–ø–µ—Ä—å —É –≤–∞—Å: ${newCount}\n\n‚ö° –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏–≥—Ä—ã!`);
            console.log('Boosters granted to self:', { boosterType, amount, newCount });
            
            // Trigger storage event
            window.dispatchEvent(new StorageEvent('storage', {
                key: 'booster_' + boosterType,
                newValue: String(newCount)
            }));
            
            // Reload booster stats
            loadBoosterStats();
        };
        
        // Grant booster to user
        window.grantBooster = function() {
            const userId = document.getElementById('grant-user-id').value.trim();
            const boosterType = document.getElementById('grant-booster-type').value;
            const amount = parseInt(document.getElementById('grant-booster-amount').value);
            
            if (!userId) {
                alert('–í–≤–µ–¥–∏—Ç–µ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ –Ω–∏–∫–Ω–µ–π–º');
                return;
            }
            
            if (amount < 1 || amount > 100) {
                alert('–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—Ç 1 –¥–æ 100');
                return;
            }
            
            // Get current user ID
            let currentUserId = null;
            if (window.userManager && window.userManager.settings) {
                currentUserId = window.userManager.settings.userId;
            }
            
            // Check if granting to current user
            if (userId === currentUserId || userId === localStorage.getItem('telegram_user_id')) {
                // Grant to current user - update localStorage and userManager
                const currentCount = parseInt(localStorage.getItem('booster_' + boosterType)) || 0;
                const newCount = currentCount + amount;
                
                // Update localStorage
                localStorage.setItem('booster_' + boosterType, newCount);
                
                // Update userManager if available
                if (window.userManager && window.userManager.isInitialized) {
                    window.userManager.settings.bonusesOwned[boosterType] = newCount;
                    window.userManager.saveSettings();
                }
                
                alert(`‚úÖ –ù–∞—á–∏—Å–ª–µ–Ω–æ: ${amount} x ${boosterType}\n–¢–µ–ø–µ—Ä—å —É –≤–∞—Å: ${newCount}\n\n‚ö†Ô∏è –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏–≥—Ä—ã –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è!`);
                console.log('Booster granted to current user:', { boosterType, amount, newCount });
                
                // Trigger storage event for other tabs
                window.dispatchEvent(new StorageEvent('storage', {
                    key: 'booster_' + boosterType,
                    newValue: String(newCount)
                }));
            } else {
                // For other users - just show message (requires backend)
                alert(`‚úÖ –ù–∞—á–∏—Å–ª–µ–Ω–æ: ${amount} x ${boosterType} –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é ${userId}\n‚ö†Ô∏è –î–ª—è –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Ç—Ä–µ–±—É–µ—Ç—Å—è backend API`);
                console.log('Booster grant requested for other user:', { userId, boosterType, amount });
            }
            
            // Clear form
            document.getElementById('grant-user-id').value = '';
            document.getElementById('grant-booster-amount').value = '1';
        };
        
        // Load booster usage statistics
        function loadBoosterStats() {
            // Get stats from localStorage
            const stats = JSON.parse(localStorage.getItem('boosterStats')) || {
                undoUsed: 0,
                shuffleUsed: 0,
                bombUsed: 0
            };
            
            document.getElementById('undo-used-count').textContent = stats.undoUsed || 0;
            document.getElementById('shuffle-used-count').textContent = stats.shuffleUsed || 0;
            document.getElementById('bomb-used-count').textContent = stats.bombUsed || 0;
        }
        
        // Initialize booster admin panel when boosters tab is shown
        const boostersTab = document.querySelector('[data-admin-tab="boosters"]');
        if (boostersTab) {
            boostersTab.addEventListener('click', function() {
                setTimeout(() => {
                    loadBoosterPrices();
                    loadBoosterStats();
                }, 100);
            });
        }

        // ===== SKINS MANAGEMENT FUNCTIONS =====
        
        // Load and display all skins in admin panel
        function loadAdminSkins() {
            const skinsContainer = document.getElementById('admin-skins-list');
            if (!skinsContainer || !window.SKIN_CONFIGS) {
                console.log('Admin skins container or SKIN_CONFIGS not found');
                return;
            }
            
            skinsContainer.innerHTML = '';
            
            Object.entries(window.SKIN_CONFIGS).forEach(([skinId, skin]) => {
                const skinCard = document.createElement('div');
                skinCard.className = 'skin-admin-card';
                const isEnabled = skin.enabled !== false;
                skinCard.innerHTML = `
                    <div class="skin-admin-header">
                        <div class="skin-admin-preview">${skin.preview}</div>
                        <div class="skin-admin-info">
                            <h4>${skin.name}</h4>
                            <div class="skin-admin-id">ID: ${skinId}</div>
                        </div>
                    </div>
                    <div style="margin-bottom: 15px; padding: 12px; background: rgba(255, 255, 255, 0.05); border-radius: 8px;">
                        <label style="display: flex; align-items: center; justify-content: space-between; cursor: pointer;">
                            <span style="font-size: 0.95rem; color: ${isEnabled ? '#4ecdc4' : 'rgba(255, 255, 255, 0.5)'};">
                                ${isEnabled ? '‚úÖ –í–∫–ª—é—á–µ–Ω (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ –º–∞–≥–∞–∑–∏–Ω–µ)' : '‚ùå –í—ã–∫–ª—é—á–µ–Ω (—Å–∫—Ä—ã—Ç –≤ –º–∞–≥–∞–∑–∏–Ω–µ)'}
                            </span>
                            <div class="toggle-switch">
                                <input type="checkbox" id="enabled-${skinId}" 
                                       ${isEnabled ? 'checked' : ''} 
                                       ${skinId === 'default' ? 'disabled' : ''}
                                       onchange="toggleSkinEnabled('${skinId}', this.checked)">
                                <span class="toggle-slider-admin"></span>
                            </div>
                        </label>
                    </div>
                    <div class="skin-admin-prices">
                        <div class="price-input-group">
                            <label>‚≠ê Stars:</label>
                            <input type="number" id="stars-${skinId}" value="${skin.priceStars || 0}" min="0" max="500" ${skinId === 'default' ? 'disabled' : ''}>
                        </div>
                        <div class="price-input-group">
                            <label>üí∞ –ú–æ–Ω–µ—Ç—ã:</label>
                            <input type="number" id="coins-${skinId}" value="${skin.price || 0}" min="0" max="10000" ${skinId === 'default' ? 'disabled' : ''}>
                        </div>
                    </div>
                    <div class="skin-admin-actions">
                        <button class="btn-save-skin" onclick="saveSkinPrices('${skinId}')" ${skinId === 'default' ? 'disabled' : ''}>
                            üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ü–µ–Ω—ã
                        </button>
                        <button class="btn-edit-json" onclick="editSkinJSON('${skinId}')">
                            üìù JSON
                        </button>
                    </div>
                `;
                skinsContainer.appendChild(skinCard);
            });
        }
        
        // Toggle skin enabled/disabled
        window.toggleSkinEnabled = function(skinId, isEnabled) {
            if (window.SKIN_CONFIGS[skinId]) {
                window.SKIN_CONFIGS[skinId].enabled = isEnabled;
            }
            
            // Save to localStorage
            const skinSettings = JSON.parse(localStorage.getItem('skinSettings')) || {};
            skinSettings[skinId] = { enabled: isEnabled };
            localStorage.setItem('skinSettings', JSON.stringify(skinSettings));
            
            // Update label text
            const label = document.querySelector(`#enabled-${skinId}`).closest('label').querySelector('span');
            if (label) {
                label.textContent = isEnabled ? '‚úÖ –í–∫–ª—é—á–µ–Ω (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ –º–∞–≥–∞–∑–∏–Ω–µ)' : '‚ùå –í—ã–∫–ª—é—á–µ–Ω (—Å–∫—Ä—ã—Ç –≤ –º–∞–≥–∞–∑–∏–Ω–µ)';
                label.style.color = isEnabled ? '#4ecdc4' : 'rgba(255, 255, 255, 0.5)';
            }
            
            console.log(`–°–∫–∏–Ω ${skinId} ${isEnabled ? '–≤–∫–ª—é—á–µ–Ω' : '–≤—ã–∫–ª—é—á–µ–Ω'}`);
        };

        // Save skin prices
        window.saveSkinPrices = function(skinId) {
            const starsInput = document.getElementById(`stars-${skinId}`);
            const coinsInput = document.getElementById(`coins-${skinId}`);
            
            if (!starsInput || !coinsInput) return;
            
            const newStarsPrice = parseInt(starsInput.value);
            const newCoinsPrice = parseInt(coinsInput.value);
            
            // Save to localStorage
            const skinPrices = JSON.parse(localStorage.getItem('skinPrices')) || {};
            skinPrices[skinId] = {
                stars: newStarsPrice,
                coins: newCoinsPrice
            };
            localStorage.setItem('skinPrices', JSON.stringify(skinPrices));
            
            // Update SKIN_CONFIGS
            if (window.SKIN_CONFIGS[skinId]) {
                window.SKIN_CONFIGS[skinId].priceStars = newStarsPrice;
                window.SKIN_CONFIGS[skinId].price = newCoinsPrice;
            }
            
            alert(`‚úÖ –¶–µ–Ω—ã –¥–ª—è —Å–∫–∏–Ω–∞ "${window.SKIN_CONFIGS[skinId].name}" —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!`);
        };
        
        // Edit skin JSON
        window.editSkinJSON = function(skinId) {
            const skin = window.SKIN_CONFIGS[skinId];
            if (!skin) return;
            
            const jsonString = JSON.stringify(skin.styleConfig, null, 2);
            const newJSON = prompt('–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å JSON –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —Å–∫–∏–Ω–∞:', jsonString);
            
            if (newJSON && newJSON !== jsonString) {
                try {
                    const parsed = JSON.parse(newJSON);
                    window.SKIN_CONFIGS[skinId].styleConfig = parsed;
                    
                    // Save to localStorage
                    const skinConfigs = JSON.parse(localStorage.getItem('skinConfigs')) || {};
                    skinConfigs[skinId] = parsed;
                    localStorage.setItem('skinConfigs', JSON.stringify(skinConfigs));
                    
                    alert('‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–∫–∏–Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞!');
                } catch (e) {
                    alert('‚ùå –û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ JSON: ' + e.message);
                }
            }
        };
        
        // Load skin statistics
        function loadSkinStats() {
            // Get purchase statistics from localStorage
            const purchases = JSON.parse(localStorage.getItem('skinPurchases')) || {};
            
            // Calculate total revenue
            let totalCoins = 0;
            let totalStars = 0;
            
            Object.entries(purchases).forEach(([skinId, data]) => {
                if (data.paymentMethod === 'coins') {
                    totalCoins += data.price || 0;
                } else if (data.paymentMethod === 'stars') {
                    totalStars += data.price || 0;
                }
            });
            
            document.getElementById('skins-revenue').textContent = totalCoins;
            document.getElementById('skins-stars').textContent = totalStars;
            
            // Load popular skins
            loadPopularSkins(purchases);
        }
        
        // Load top popular skins
        function loadPopularSkins(purchases = null) {
            if (!purchases) {
                purchases = JSON.parse(localStorage.getItem('skinPurchases')) || {};
            }
            
            const popularContainer = document.getElementById('popular-skins');
            if (!popularContainer || !window.SKIN_CONFIGS) return;
            
            // Count purchases per skin
            const skinCounts = {};
            Object.entries(purchases).forEach(([skinId, data]) => {
                skinCounts[skinId] = (skinCounts[skinId] || 0) + (data.count || 1);
            });
            
            // Sort by count
            const sorted = Object.entries(skinCounts)
                .sort((a, b) => b[1] - a[1])
                .slice(0, 5);
            
            if (sorted.length === 0) {
                popularContainer.innerHTML = '<p style="color: rgba(255,255,255,0.5); text-align: center;">–ü–æ–∫–∞ –Ω–µ—Ç –ø–æ–∫—É–ø–æ–∫</p>';
                return;
            }
            
            popularContainer.innerHTML = '';
            sorted.forEach(([skinId, count], index) => {
                const skin = window.SKIN_CONFIGS[skinId];
                if (!skin) return;
                
                const rankClass = index === 0 ? '' : index === 1 ? 'rank-2' : index === 2 ? 'rank-3' : '';
                
                const item = document.createElement('div');
                item.className = 'popular-skin-item';
                item.innerHTML = `
                    <div class="popular-skin-left">
                        <div class="popular-skin-rank ${rankClass}">${index + 1}</div>
                        <div class="popular-skin-icon">${skin.preview}</div>
                        <div class="popular-skin-name">${skin.name}</div>
                    </div>
                    <div class="popular-skin-purchases">${count} üõí</div>
                `;
                popularContainer.appendChild(item);
            });
        }
        
        // Initialize skins admin panel when skins tab is shown
        const skinsTab = document.querySelector('[data-admin-tab="skins"]');
        if (skinsTab) {
            skinsTab.addEventListener('click', function() {
                setTimeout(() => {
                    loadAdminSkins();
                    loadSkinStats();
                }, 100);
            });
        }
    </script>

    <!-- Animated Toolbar -->
    <div class="toolbar">
        <div class="icon icon--home toolbar__icon" data-page="home">
            <svg width="48" height="48" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
                <rect class="a" x="24" y="5.5" width="18.5" height="18.5" rx="4" fill="none" stroke="currentColor" stroke-linejoin="round"></rect>
                <rect class="a" x="5.5" y="24" width="18.5" height="18.5" rx="4" fill="none" stroke="currentColor" stroke-linejoin="round"></rect>
                <rect class="a" x="24" y="24" width="18.5" height="18.5" rx="4" fill="none" stroke="currentColor" stroke-linejoin="round"></rect>
                <rect class="a" x="5.5" y="5.5" width="18.5" height="18.5" rx="4" fill="none" stroke="currentColor" stroke-linejoin="round"></rect>
                <polyline class="b" points="16.805 38.25 16.804 28.25 11.438 34.967 18.063 34.967" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></polyline>
                <path class="b" d="M29.9375,16.4375a3.3125,3.3125,0,0,0,6.625,0v-3.375a3.3125,3.3125,0,0,0-6.625,0Z" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path class="b" d="M11.4375,13.0625a3.3125,3.3125,0,0,1,6.625,0,3.0905,3.0905,0,0,1-.97,2.3423c-1.34,1.176-5.6548,4.3452-5.6548,4.3452h6.625" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path class="b" d="M32.4375,33.25a2.5,2.5,0,0,0-2.5,2.5h0a2.5,2.5,0,0,0,2.5,2.5h1.625a2.5,2.5,0,0,0,2.5-2.5h0a2.5,2.5,0,0,0-2.5-2.5" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <path class="b" d="M34.0625,33.25a2.5,2.5,0,0,0,2.5-2.5h0a2.5,2.5,0,0,0-2.5-2.5h-1.625a2.5,2.5,0,0,0-2.5,2.5h0a2.5,2.5,0,0,0,2.5,2.5" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                <line class="b" x1="32.4375" y1="33.25" x2="34.0625" y2="33.25" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></line>
            </svg>
        </div>

        <svg class="icon icon--chart toolbar__icon" data-page="tasks" width="24" height="21" viewBox="0 0 24 21" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M14.2491 16.7555C13.9697 17.321 13.4303 18 12.5 18C11.6845 18 11.1251 17.5105 10.7863 16.9787C10.4629 16.4712 10.2644 15.8237 10.1285 15.1732C9.85403 13.8589 9.7633 12.1512 9.7038 10.5368C9.69123 10.1958 9.68004 9.85882 9.66906 9.52853C9.62659 8.25006 9.58744 7.07143 9.48457 6.14116C9.47719 6.07445 9.46959 6.01015 9.46178 5.94825C9.45696 5.96452 9.45214 5.98098 9.4473 5.99763C9.16661 6.96419 8.93645 8.27726 8.69349 9.67166L8.68604 9.71441C8.45204 11.0574 8.20493 12.4757 7.89001 13.5601C7.73252 14.1025 7.5375 14.6372 7.27709 15.0557C7.03799 15.4399 6.56714 16 5.79166 16C4.7035 16 4.09185 15.1378 3.77627 14.5138C3.43377 13.8367 3.20233 12.9844 3.02231 12.233C2.95225 11.9406 2.89044 11.6665 2.83272 11.4105C2.76944 11.1299 2.71107 10.8711 2.65214 10.6338C2.35554 11.1802 2.09737 11.851 1.95258 12.3043L0.0474205 11.6957C0.219649 11.1566 0.530238 10.3423 0.914202 9.64346C1.10415 9.29774 1.33678 8.93433 1.60956 8.64373C1.85202 8.38542 2.29764 8 2.91666 8C3.61347 8 3.97613 8.54018 4.10107 8.7549C4.25983 9.02776 4.37297 9.35807 4.46035 9.65648C4.57709 10.0551 4.69172 10.562 4.80457 11.061C4.85921 11.3025 4.91343 11.5423 4.96727 11.767C5.14663 12.5156 5.33445 13.1633 5.56097 13.6112C5.60393 13.6961 5.64269 13.7634 5.6768 13.8166C5.76702 13.6261 5.86619 13.3576 5.96936 13.0024C6.25005 12.0358 6.48021 10.7227 6.72317 9.32834L6.73062 9.28559C6.96462 7.94259 7.21173 6.5243 7.52665 5.43987C7.68414 4.89755 7.87916 4.36278 8.13958 3.94431C8.37867 3.5601 8.84952 3 9.625 3C10.5539 3 10.962 3.80362 11.1143 4.1998C11.2992 4.6807 11.4032 5.29472 11.4725 5.92134C11.5847 6.93626 11.6271 8.22023 11.6697 9.50767C11.6802 9.82731 11.6908 10.1472 11.7024 10.4632C11.7627 12.0988 11.8517 13.6411 12.0863 14.7643C12.1992 15.3051 12.33 15.6645 12.4541 15.8734C12.4548 15.8721 12.4554 15.8708 12.4561 15.8695C12.6027 15.5727 12.7399 15.0708 12.8519 14.3471C13.0573 13.0198 13.1353 11.2642 13.2182 9.3995C13.2247 9.252 13.2313 9.10383 13.238 8.95512C13.327 6.97365 13.4332 4.89535 13.7421 3.30893C13.8951 2.52269 14.1144 1.76214 14.4648 1.17501C14.8262 0.569572 15.4295 0 16.3333 0C17.3348 0 17.917 0.740883 18.2253 1.38429C18.5418 2.04487 18.7345 2.90987 18.8656 3.82728C19.1284 5.66656 19.1895 8.08749 19.2484 10.4259L19.2497 10.4748C19.3101 12.8713 19.3699 15.1794 19.6143 16.8898C19.7377 17.7536 19.897 18.373 20.0783 18.7515C20.1443 18.8892 20.1948 18.9611 20.2257 18.9964C20.2865 18.9875 20.3283 18.96 20.3864 18.8897C20.4961 18.7572 20.626 18.496 20.7381 18.0416C20.9635 17.1285 21.0228 15.8671 21.0843 14.4565L21.0874 14.3841C21.1449 13.0637 21.2082 11.6078 21.4868 10.4791C21.6292 9.9022 21.8513 9.30411 22.2395 8.83506C22.6622 8.32426 23.2583 8 24 8V10C23.9031 10 23.8553 10.0195 23.7802 10.1103C23.6705 10.2428 23.5407 10.504 23.4285 10.9584C23.2031 11.8715 23.1438 13.1329 23.0824 14.5435L23.0792 14.6159C23.0218 15.9363 22.9585 17.3922 22.6798 18.5209C22.5374 19.0978 22.3154 19.6959 21.9272 20.1649C21.5044 20.6757 20.9083 21 20.1667 21C19.1652 21 18.583 20.2591 18.2747 19.6157C17.9582 18.9551 17.7655 18.0901 17.6344 17.1727C17.3716 15.3335 17.3105 12.9125 17.2516 10.5742L17.2503 10.5252C17.1899 8.1287 17.1301 5.82061 16.8857 4.11022C16.7623 3.24638 16.603 2.62701 16.4217 2.24853C16.372 2.14478 16.331 2.07836 16.3007 2.03681C16.2716 2.06752 16.2309 2.11845 16.1822 2.19999C16.0104 2.48786 15.8441 2.97731 15.7052 3.69107C15.43 5.10465 15.3266 7.02635 15.236 9.04488C15.2289 9.20321 15.2218 9.36217 15.2148 9.52144C15.1341 11.3454 15.0515 13.2111 14.8284 14.6529C14.7083 15.4292 14.5348 16.1773 14.2491 16.7555Z" fill="currentColor"/>
        </svg>

        <div class="icon icon--podium toolbar__icon" data-page="leaderboard">
            <svg width="24" height="24" viewBox="0 0 488.049 488.049" xmlns="http://www.w3.org/2000/svg">
                <path d="M127.442,193.204H17.235C7.732,193.204,0,200.936,0,210.438v256.539c0,9.504,7.732,17.235,17.235,17.235l110.207-0.001 c9.503,0,17.235-7.731,17.235-17.234V210.438C144.678,200.936,136.946,193.204,127.442,193.204z"/>
                <path d="M299.128,98.519H188.921c-9.503,0-17.234,7.731-17.234,17.235v351.223c0,9.503,7.732,17.234,17.234,17.234h110.207 c9.504,0,17.236-7.731,17.236-17.234V115.755C316.364,106.251,308.632,98.519,299.128,98.519z"/>
                <path d="M470.813,3.836H360.606c-9.503,0-17.235,7.732-17.235,17.235v445.906c0,9.503,7.732,17.234,17.235,17.234h110.207 c9.503,0,17.235-7.731,17.235-17.234V21.071C488.049,11.567,480.317,3.836,470.813,3.836z"/>
            </svg>
        </div>

        <svg class="icon icon--shop toolbar__icon" data-page="shop" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M3.5 11V14C3.5 17.7712 3.5 19.6569 4.67157 20.8284C5.84315 22 7.72876 22 11.5 22H12.5C16.2712 22 18.1569 22 19.3284 20.8284M20.5 11V14C20.5 15.1698 20.5 16.1581 20.465 17" stroke="#ffffff" stroke-width="1.5" stroke-linecap="round"></path>
            <path d="M9.50002 2H14.5M9.50002 2L8.84828 8.51737C8.66182 10.382 10.1261 12 12 12C13.874 12 15.3382 10.382 15.1518 8.51737L14.5 2M9.50002 2H7.41771C6.50969 2 6.05567 2 5.66628 2.10675C4.84579 2.33168 4.15938 2.89439 3.77791 3.65484M9.50002 2L8.77549 9.24527C8.61911 10.8091 7.30318 12 5.73155 12C3.8011 12 2.35324 10.2339 2.73183 8.34093L2.80002 8M14.5 2H16.5823C17.4904 2 17.9444 2 18.3338 2.10675C19.1542 2.33168 19.8407 2.89439 20.2221 3.65484C20.4032 4.01573 20.4922 4.46093 20.6703 5.35133L21.2682 8.34093C21.6468 10.2339 20.1989 12 18.2685 12C16.6969 12 15.3809 10.8091 15.2245 9.24527L14.5 2Z" stroke="#ffffff" stroke-width="1.5" stroke-linecap="round"></path>
            <path d="M9.5 21.5V18.5C9.5 17.5654 9.5 17.0981 9.70096 16.75C9.83261 16.522 10.022 16.3326 10.25 16.201C10.5981 16 11.0654 16 12 16C12.9346 16 13.4019 16 13.75 16.201C13.978 16.3326 14.1674 16.522 14.299 16.75C14.5 17.0981 14.5 17.5654 14.5 18.5V21.5" stroke="#ffffff" stroke-width="1.5" stroke-linecap="round"></path>
        </svg>

        <div class="icon icon--search toolbar__icon is-active" data-page="profile">
            <div class="toolbar-avatar" id="toolbar-avatar">üë§</div>
        </div>
    </div>

    <!-- SVG -->
    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
      <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 25" id="icon-01">
        <path d="M9.82,1.5A11.13,11.13,0,0,0,1.5,12.33a11.08,11.08,0,0,0,11,11.17,11.08,11.08,0,0,0,11-11.17A11.16,11.16,0,0,0,16.33,1.86V12.33a3.9,3.9,0,1,1-.08-.78"/>
      </symbol>
      <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 25" id="icon-02">
        <path d="M18.16,23.5h2.16a3.19,3.19,0,0,0,3.18-3.18V4.68A3.19,3.19,0,0,0,20.32,1.5H8.81l0,4.19A3.15,3.15,0,1,1,5.69,8.83H1.5V20.32A3.19,3.19,0,0,0,4.68,23.5h8.83s-.49-5.76,4.75-8.38" />
      </symbol>
      <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 25" id="icon-03">
        <path d="M14.6,5.13V4.68A3.19,3.19,0,0,0,11.42,1.5H4.68A3.19,3.19,0,0,0,1.5,4.68V20.32A3.19,3.19,0,0,0,4.68,23.5H20.32a3.19,3.19,0,0,0,3.18-3.18V12.53a3.19,3.19,0,0,0-3.18-3.17H6.77" />
      </symbol>
      <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 25" id="icon-04">
        <path d="M4,23.5a11,11,0,0,1,17,0" />
        <path d="M15.66,10.5a3.16,3.16,0,0,1-6.32,0H3.5a9,9,0,1,1,2.87,6.59" />
      </symbol>
    </svg>

    <svg xmlns="http://www.w3.org/2000/svg" height="0" width="0">
        <clipPath id="path-icon-01">
            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
        </clipPath>
        <clipPath id="path-icon-02">
            <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/>
        </clipPath>
        <clipPath id="path-icon-03">
            <path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/>
        </clipPath>
        <clipPath id="path-icon-04">
            <path d="M6 3h4l4 6-4 10L6 9l4-6z"/>
        </clipPath>
        <clipPath id="path-icon-05">
            <circle cx="12" cy="7" r="4"/>
        </clipPath>
    </svg>
    
    <script src="js/toolbar-avatar.js?v=1.2.1"></script>
    <script src="js/toolbar-nav.js?v=1.2.1"></script>
    <script src="js/main.js?v=1.2.1"></script>
</body>
</html>
